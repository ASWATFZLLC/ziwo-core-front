{"version":3,"file":"ziwo-core-front.umd.js","sources":["../node_modules/md5-typescript/index.ts","../src/messages.ts","../src/authentication.service.ts","../src/api.service.ts","../src/events.ts","../src/media-channel.ts","../src/verto/verto.params.ts","../src/call.ts","../src/verto/RTCPeerConnection.factory.ts","../src/verto/verto.orchestrator.ts","../src/verto/verto.clear.ts","../src/verto/verto.session.ts","../src/verto/verto.ts","../src/main.ts"],"sourcesContent":["export class Md5 {\n\n    private static _string: string;\n    private static x: Array<number> = <Array<number>>Array();\n    private static k: number;\n    private static AA: number;\n    private static BB: number;\n    private static CC: number;\n    private static DD: number;\n    private static a: number;\n    private static b: number;\n    private static c: number;\n    private static d: number;\n    private static S11: number = 7;\n    private static S12: number = 12;\n    private static S13: number = 17;\n    private static S14: number = 22;\n    private static S21: number = 5;\n    private static S22: number = 9;\n    private static S23: number = 14;\n    private static S24: number = 20;\n    private static S31: number = 4;\n    private static S32: number = 11;\n    private static S33: number = 16;\n    private static S34: number = 23;\n    private static S41: number = 6;\n    private static S42: number = 10;\n    private static S43: number = 15;\n    private static S44: number = 21;\n\n    private static RotateLeft: Function = ( lValue: number, iShiftBits: number ) : number => (lValue << iShiftBits) | (lValue >>> (32 - iShiftBits));\n\n    private static AddUnsigned( lX: number, lY: number ) : number\n    {\n        let lX4: number,\n            lY4: number,\n            lX8: number,\n            lY8: number,\n            lResult: number;\n\n        lX8 = (lX & 0x80000000);\n        lY8 = (lY & 0x80000000);\n        lX4 = (lX & 0x40000000);\n        lY4 = (lY & 0x40000000);\n        lResult = (lX & 0x3FFFFFFF) + (lY & 0x3FFFFFFF);\n\n        if ( !!(lX4 & lY4) )\n        {\n            return (lResult ^ 0x80000000 ^ lX8 ^ lY8);\n        }\n\n        if ( !!(lX4 | lY4) )\n        {\n            if ( !!(lResult & 0x40000000) )\n            {\n                return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);\n            }\n            else\n            {\n                return (lResult ^ 0x40000000 ^ lX8 ^ lY8);\n            }\n        }\n        else\n        {\n            return (lResult ^ lX8 ^ lY8);\n        }\n    }\n\n    private static F: Function = ( x: number, y: number, z: number ) : number => (x & y) | ((~x) & z);\n\n    private static G: Function = ( x: number, y: number, z: number ) : number => (x & z) | (y & (~z));\n\n    private static H: Function = ( x: number, y: number, z: number ) : number => (x ^ y ^ z);\n\n    private static I: Function = ( x: number, y: number, z: number ) : number => (y ^ (x | (~z)));\n\n    private static FF( a: number, b: number, c: number, d: number, x: number, s: number, ac: number ) : number\n    {\n        a = this.AddUnsigned(a, this.AddUnsigned(this.AddUnsigned(this.F(b, c, d), x), ac));\n        return this.AddUnsigned(this.RotateLeft(a, s), b);\n    }\n\n    private static GG( a: number, b: number, c: number, d: number, x: number, s: number, ac: number) : number\n    {\n        a = this.AddUnsigned(a, this.AddUnsigned(this.AddUnsigned(this.G(b, c, d), x), ac));\n        return this.AddUnsigned(this.RotateLeft(a, s), b);\n    }\n\n    private static HH( a: number, b: number, c: number, d: number, x: number, s: number, ac: number ) : number\n    {\n        a = this.AddUnsigned(a, this.AddUnsigned(this.AddUnsigned(this.H(b, c, d), x), ac));\n        return this.AddUnsigned(this.RotateLeft(a, s), b);\n    }\n\n    private static II(a: number, b: number, c: number, d: number, x: number, s: number, ac: number) : number\n    {\n        a = this.AddUnsigned(a, this.AddUnsigned(this.AddUnsigned(this.I(b, c, d), x), ac));\n        return this.AddUnsigned(this.RotateLeft(a, s), b);\n    }\n\n    private static ConvertToWordArray( string: string ) : Array<number>\n    {\n        let lWordCount: number,\n            lMessageLength: number = string.length,\n            lNumberOfWords_temp1: number = lMessageLength + 8,\n            lNumberOfWords_temp2: number = (lNumberOfWords_temp1 - (lNumberOfWords_temp1 % 64)) / 64,\n            lNumberOfWords: number = (lNumberOfWords_temp2 + 1) * 16,\n            lWordArray: Array<number> = Array(lNumberOfWords - 1),\n            lBytePosition: number = 0,\n            lByteCount: number = 0;\n\n        while ( lByteCount < lMessageLength )\n        {\n            lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n            lBytePosition = (lByteCount % 4) * 8;\n            lWordArray[lWordCount] = (lWordArray[lWordCount] | (string.charCodeAt(lByteCount) << lBytePosition));\n            lByteCount++;\n        }\n\n        lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n        lBytePosition = (lByteCount % 4) * 8;\n        lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80 << lBytePosition);\n        lWordArray[lNumberOfWords - 2] = lMessageLength << 3;\n        lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;\n\n        return lWordArray;\n    }\n\n    private static WordToHex( lValue: number ) : string\n    {\n        let WordToHexValue: string = \"\",\n            WordToHexValue_temp: string = \"\",\n            lByte: number,\n            lCount: number;\n\n        for ( lCount = 0; lCount <= 3; lCount++ )\n        {\n            lByte = (lValue >>> (lCount * 8)) & 255;\n            WordToHexValue_temp = \"0\" + lByte.toString(16);\n            WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length - 2, 2);\n        }\n\n        return WordToHexValue;\n    }\n\n    private static Utf8Encode( string: string ) : string\n    {\n        let utftext: string = \"\",\n            c: number;\n\n        string = string.replace(/\\r\\n/g, \"\\n\");\n\n        for ( let n = 0; n < string.length; n++ )\n        {\n            c = string.charCodeAt(n);\n\n            if ( c < 128 )\n            {\n                utftext += String.fromCharCode(c);\n            }\n            else if ( (c > 127) && (c < 2048) )\n            {\n                utftext += String.fromCharCode((c >> 6) | 192);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n            else\n            {\n                utftext += String.fromCharCode((c >> 12) | 224);\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n\n        }\n\n        return utftext;\n    }\n\n    public static init( string: any ) : string\n    {\n        let temp: string;\n\n        if ( typeof string !== 'string' )\n            string = JSON.stringify(string);\n\n        this._string = this.Utf8Encode(string);\n        this.x = this.ConvertToWordArray(this._string);\n\n        this.a = 0x67452301;\n        this.b = 0xEFCDAB89;\n        this.c = 0x98BADCFE;\n        this.d = 0x10325476;\n\n        for ( this.k = 0; this.k < this.x.length; this.k += 16 )\n        {\n            this.AA = this.a;\n            this.BB = this.b;\n            this.CC = this.c;\n            this.DD = this.d;\n            this.a = this.FF(this.a, this.b, this.c, this.d, this.x[this.k], this.S11, 0xD76AA478);\n            this.d = this.FF(this.d, this.a, this.b, this.c, this.x[this.k + 1], this.S12, 0xE8C7B756);\n            this.c = this.FF(this.c, this.d, this.a, this.b, this.x[this.k + 2], this.S13, 0x242070DB);\n            this.b = this.FF(this.b, this.c, this.d, this.a, this.x[this.k + 3], this.S14, 0xC1BDCEEE);\n            this.a = this.FF(this.a, this.b, this.c, this.d, this.x[this.k + 4], this.S11, 0xF57C0FAF);\n            this.d = this.FF(this.d, this.a, this.b, this.c, this.x[this.k + 5], this.S12, 0x4787C62A);\n            this.c = this.FF(this.c, this.d, this.a, this.b, this.x[this.k + 6], this.S13, 0xA8304613);\n            this.b = this.FF(this.b, this.c, this.d, this.a, this.x[this.k + 7], this.S14, 0xFD469501);\n            this.a = this.FF(this.a, this.b, this.c, this.d, this.x[this.k + 8], this.S11, 0x698098D8);\n            this.d = this.FF(this.d, this.a, this.b, this.c, this.x[this.k + 9], this.S12, 0x8B44F7AF);\n            this.c = this.FF(this.c, this.d, this.a, this.b, this.x[this.k + 10], this.S13, 0xFFFF5BB1);\n            this.b = this.FF(this.b, this.c, this.d, this.a, this.x[this.k + 11], this.S14, 0x895CD7BE);\n            this.a = this.FF(this.a, this.b, this.c, this.d, this.x[this.k + 12], this.S11, 0x6B901122);\n            this.d = this.FF(this.d, this.a, this.b, this.c, this.x[this.k + 13], this.S12, 0xFD987193);\n            this.c = this.FF(this.c, this.d, this.a, this.b, this.x[this.k + 14], this.S13, 0xA679438E);\n            this.b = this.FF(this.b, this.c, this.d, this.a, this.x[this.k + 15], this.S14, 0x49B40821);\n            this.a = this.GG(this.a, this.b, this.c, this.d, this.x[this.k + 1], this.S21, 0xF61E2562);\n            this.d = this.GG(this.d, this.a, this.b, this.c, this.x[this.k + 6], this.S22, 0xC040B340);\n            this.c = this.GG(this.c, this.d, this.a, this.b, this.x[this.k + 11], this.S23, 0x265E5A51);\n            this.b = this.GG(this.b, this.c, this.d, this.a, this.x[this.k], this.S24, 0xE9B6C7AA);\n            this.a = this.GG(this.a, this.b, this.c, this.d, this.x[this.k + 5], this.S21, 0xD62F105D);\n            this.d = this.GG(this.d, this.a, this.b, this.c, this.x[this.k + 10], this.S22, 0x2441453);\n            this.c = this.GG(this.c, this.d, this.a, this.b, this.x[this.k + 15], this.S23, 0xD8A1E681);\n            this.b = this.GG(this.b, this.c, this.d, this.a, this.x[this.k + 4], this.S24, 0xE7D3FBC8);\n            this.a = this.GG(this.a, this.b, this.c, this.d, this.x[this.k + 9], this.S21, 0x21E1CDE6);\n            this.d = this.GG(this.d, this.a, this.b, this.c, this.x[this.k + 14], this.S22, 0xC33707D6);\n            this.c = this.GG(this.c, this.d, this.a, this.b, this.x[this.k + 3], this.S23, 0xF4D50D87);\n            this.b = this.GG(this.b, this.c, this.d, this.a, this.x[this.k + 8], this.S24, 0x455A14ED);\n            this.a = this.GG(this.a, this.b, this.c, this.d, this.x[this.k + 13], this.S21, 0xA9E3E905);\n            this.d = this.GG(this.d, this.a, this.b, this.c, this.x[this.k + 2], this.S22, 0xFCEFA3F8);\n            this.c = this.GG(this.c, this.d, this.a, this.b, this.x[this.k + 7], this.S23, 0x676F02D9);\n            this.b = this.GG(this.b, this.c, this.d, this.a, this.x[this.k + 12], this.S24, 0x8D2A4C8A);\n            this.a = this.HH(this.a, this.b, this.c, this.d, this.x[this.k + 5], this.S31, 0xFFFA3942);\n            this.d = this.HH(this.d, this.a, this.b, this.c, this.x[this.k + 8], this.S32, 0x8771F681);\n            this.c = this.HH(this.c, this.d, this.a, this.b, this.x[this.k + 11], this.S33, 0x6D9D6122);\n            this.b = this.HH(this.b, this.c, this.d, this.a, this.x[this.k + 14], this.S34, 0xFDE5380C);\n            this.a = this.HH(this.a, this.b, this.c, this.d, this.x[this.k + 1], this.S31, 0xA4BEEA44);\n            this.d = this.HH(this.d, this.a, this.b, this.c, this.x[this.k + 4], this.S32, 0x4BDECFA9);\n            this.c = this.HH(this.c, this.d, this.a, this.b, this.x[this.k + 7], this.S33, 0xF6BB4B60);\n            this.b = this.HH(this.b, this.c, this.d, this.a, this.x[this.k + 10], this.S34, 0xBEBFBC70);\n            this.a = this.HH(this.a, this.b, this.c, this.d, this.x[this.k + 13], this.S31, 0x289B7EC6);\n            this.d = this.HH(this.d, this.a, this.b, this.c, this.x[this.k], this.S32, 0xEAA127FA);\n            this.c = this.HH(this.c, this.d, this.a, this.b, this.x[this.k + 3], this.S33, 0xD4EF3085);\n            this.b = this.HH(this.b, this.c, this.d, this.a, this.x[this.k + 6], this.S34, 0x4881D05);\n            this.a = this.HH(this.a, this.b, this.c, this.d, this.x[this.k + 9], this.S31, 0xD9D4D039);\n            this.d = this.HH(this.d, this.a, this.b, this.c, this.x[this.k + 12], this.S32, 0xE6DB99E5);\n            this.c = this.HH(this.c, this.d, this.a, this.b, this.x[this.k + 15], this.S33, 0x1FA27CF8);\n            this.b = this.HH(this.b, this.c, this.d, this.a, this.x[this.k + 2], this.S34, 0xC4AC5665);\n            this.a = this.II(this.a, this.b, this.c, this.d, this.x[this.k], this.S41, 0xF4292244);\n            this.d = this.II(this.d, this.a, this.b, this.c, this.x[this.k + 7], this.S42, 0x432AFF97);\n            this.c = this.II(this.c, this.d, this.a, this.b, this.x[this.k + 14], this.S43, 0xAB9423A7);\n            this.b = this.II(this.b, this.c, this.d, this.a, this.x[this.k + 5], this.S44, 0xFC93A039);\n            this.a = this.II(this.a, this.b, this.c, this.d, this.x[this.k + 12], this.S41, 0x655B59C3);\n            this.d = this.II(this.d, this.a, this.b, this.c, this.x[this.k + 3], this.S42, 0x8F0CCC92);\n            this.c = this.II(this.c, this.d, this.a, this.b, this.x[this.k + 10], this.S43, 0xFFEFF47D);\n            this.b = this.II(this.b, this.c, this.d, this.a, this.x[this.k + 1], this.S44, 0x85845DD1);\n            this.a = this.II(this.a, this.b, this.c, this.d, this.x[this.k + 8], this.S41, 0x6FA87E4F);\n            this.d = this.II(this.d, this.a, this.b, this.c, this.x[this.k + 15], this.S42, 0xFE2CE6E0);\n            this.c = this.II(this.c, this.d, this.a, this.b, this.x[this.k + 6], this.S43, 0xA3014314);\n            this.b = this.II(this.b, this.c, this.d, this.a, this.x[this.k + 13], this.S44, 0x4E0811A1);\n            this.a = this.II(this.a, this.b, this.c, this.d, this.x[this.k + 4], this.S41, 0xF7537E82);\n            this.d = this.II(this.d, this.a, this.b, this.c, this.x[this.k + 11], this.S42, 0xBD3AF235);\n            this.c = this.II(this.c, this.d, this.a, this.b, this.x[this.k + 2], this.S43, 0x2AD7D2BB);\n            this.b = this.II(this.b, this.c, this.d, this.a, this.x[this.k + 9], this.S44, 0xEB86D391);\n\n            this.a = this.AddUnsigned(this.a, this.AA);\n            this.b = this.AddUnsigned(this.b, this.BB);\n            this.c = this.AddUnsigned(this.c, this.CC);\n            this.d = this.AddUnsigned(this.d, this.DD);\n        }\n\n        temp = this.WordToHex(this.a) + this.WordToHex(this.b) + this.WordToHex(this.c) + this.WordToHex(this.d);\n        return temp.toLowerCase();\n    }\n}","const MESSAGE_PREFIX = '[LIB Ziwo-core-front] ';\n\nexport const MESSAGES = {\n  EMAIL_PASSWORD_AUTHTOKEN_MISSING: `${MESSAGE_PREFIX}Email or password are missing and no authentication token were provided.`,\n  INVALID_PHONE_NUMBER: (phoneNumber:string) => `${phoneNumber} is not a valid phone number`,\n  AGENT_NOT_CONNECTED: (action:string) => `Agent is not connected. Cannot proceed '${action}'`,\n  MEDIA_ERROR: `${MESSAGE_PREFIX}User media are not available`,\n};\n","import {Md5} from 'md5-typescript';\nimport {ApiService, ApiResult} from './api.service';\nimport {MESSAGES} from './messages';\n\nexport interface ManualPosition {\n\n}\n\n/**\n * Credential provided by Ziwo\n * @email is the agent's email\n * @password is the agent's password\n */\nexport interface Credentials {\n  /**\n   * @email is the agent email\n   * If not provided, please provide @authenticationToken\n   */\n  email:string;\n\n  /**\n   * @email is the agent password\n   * If not provided, please provide @authenticationToken\n   */\n  password:string;\n\n  /**\n   * @authenticationToken is the token provided by the /login API\n   * If not provided, please provide @email and @password\n   */\n  authenticationToken?:string;\n}\n\nenum UserStatus {\n  Active = 'active',\n}\n\nenum UserType {\n  Admin = 'admin',\n}\n\nenum UserProfileType {\n  User = 'users'\n}\n\nexport interface User {\n  id:number;\n  firstName:string;\n  lastName:string;\n  username:string;\n  status:UserStatus;\n  type:UserType;\n  photo:string;\n  roleId:number;\n  lastLoginAt:string;\n  contactNumber:null|string;\n  createdAt:string;\n  updatedAt:string;\n  access_token:string;\n  profileType:UserProfileType;\n  role:any;\n  roles:any;\n}\n\ninterface UserInfo extends User {\n  ccLogin:number;\n  ccPassword:number;\n  liveInfo:any;\n  liveCalls:any[];\n  wrapUpTime:number;\n  noAnswerDelayTime:any;\n  noAnswerTimeout:any;\n  roamingContactNumber:string;\n  roamingTimeout:number;\n}\n\ninterface Queue {\n  announcementType:string;\n  callerIDNumber:any|null;\n  ​createdAt:string;\n  ​deletedAt:string|null;\n  ​id:number;\n  ​image:string|null;\n  ​language:string;\n  ​maxWaitTime:number;\n  ​moh:string;\n  ​name:string;\n  ​nonWorkingHoursDID:string;\n  ​priority:number;\n  ​status:string;\n  ​strategyType:string;\n  ​surveyRequired:boolean;\n  ​timeslots:string;\n  ​updatedAt:string;\n  ​urgentMessage:any|null;\n  ​waitTimeoutDID:string;\n}\n\ninterface Number {\n  beyondTimeslotsLinkData:any|null;\n  ​​beyondTimeslotsLinkType:any|null;\n  ​​createdAt:string;\n  ​​deletedAt:any|null;\n  ​​did:string;\n  ​​didCalled:string;\n  ​​didDisplay:string;\n  ​​id:number;\n  ​​linkData:string;\n  ​​linkType:string;\n  ​​status:string;\n  ​​length:number;\n  ​​timeslots:any[];\n  ​​updatedAt:string;\n  ​​urgentMessage:any|null;\n}\n\ninterface WebRtcInfo {\n  socket:string;\n}\n\nexport interface AgentPosition {\n  name:string;\n  password:string;\n  hostname:string;\n}\n\nexport interface AgentInfo {\n  userInfo:UserInfo;\n  queues:Queue[];\n  numbers:Number[];\n  webRtc:WebRtcInfo;\n  position:AgentPosition;\n}\n\n\nexport class AuthenticationService {\n\n  constructor() {}\n\n  public static authenticate(api:ApiService, credentials:Credentials):Promise<AgentInfo> {\n    if (credentials.authenticationToken) {\n      api.setToken(credentials.authenticationToken);\n      return new Promise<any>((onRes, onErr) => {\n        Promise.all([\n          this.initAgent(api),\n          this.autoLogin(api),\n        ]).then(res => onRes(res[0])).catch(err => onErr(err));\n      });\n    }\n    if (!credentials.email || !credentials.password) {\n      throw new Error(MESSAGES.EMAIL_PASSWORD_AUTHTOKEN_MISSING);\n    }\n    return new Promise<any>((onRes, onErr) => {\n      this.loginZiwo(api, credentials.email, credentials.password).then(() => {\n        Promise.all([\n          this.initAgent(api),\n          this.autoLogin(api),\n        ]).then(res => {\n          onRes(res[0]);\n        }).catch(err => onErr(err));\n      }).catch(err => onErr(err));\n    });\n  }\n\n  private static loginZiwo(api:ApiService, email:string, password:string):Promise<User> {\n    return new Promise<User>((onRes, onErr) => {\n      api.post<User>(api.endpoints.authenticate, {\n        username: email,\n        password: password,\n      }).then(r => {\n        api.setToken(r.content.access_token);\n        onRes(r.content);\n      }).catch(e => {\n        onErr(e);\n      });\n    });\n  }\n\n  private static autoLogin(api:ApiService):Promise<any> {\n    return api.put<any>('/agents/autologin', {});\n  }\n\n  private static initAgent(api:ApiService):Promise<AgentInfo> {\n    return new Promise<AgentInfo>((onRes, onErr) => {\n      Promise.all([\n        this.fetchAgentProfile(api),\n        this.fetchListQueues(api),\n        this.fetchListNumbers(api),\n        this.fetchWebRTCConfig(api),\n      ]).then(res => {\n        onRes({\n          userInfo: res[0],\n          queues: res[1] || [],\n          numbers: res[2] || [],\n          webRtc: {\n            socket: `${res[3].webSocket.protocol}://${api.getHostname()}:${res[3].webSocket.port}`,\n          },\n          position: {\n            name: `agent-${res[0].ccLogin}`,\n            password: Md5.init(`${res[0].ccLogin}${res[0].ccPassword}`).toString(),\n            hostname: api.getHostname(),\n          }\n        });\n      })\n      .catch(err => onErr(err));\n    });\n  }\n\n  private static fetchAgentProfile(api:ApiService):Promise<any> {\n    return new Promise<any>((onRes, onErr) => {\n      api.get(api.endpoints.profile).then(res => {\n        onRes(res.content);\n      }).catch(err => onErr(err));\n    });\n  }\n\n  private static fetchListQueues(api:ApiService):Promise<any> {\n    return new Promise<any>((onRes, onErr) => {\n      api.get('/agents/channels/calls/listQueues').then(res => {\n        onRes(res.content);\n      }).catch(err => onErr(err));\n    });\n  }\n\n  private static fetchListNumbers(api:ApiService):Promise<any> {\n    return new Promise<any>((onRes, onErr) => {\n      api.get('/agents/channels/calls/listNumbers').then(res => {\n        onRes(res.content);\n      }).catch(err => onErr(err));\n    });\n  }\n\n  private static fetchWebRTCConfig(api:ApiService):Promise<any> {\n    return new Promise<any>((onRes, onErr) => {\n      api.get('/fs/webrtc/config').then(res => {\n        onRes(res.content);\n      }).catch(err => onErr(err));\n    });\n  }\n\n}\n","\nexport interface ApiResult<T> {\n  result:boolean;\n  info:any;\n  content:T;\n}\n\nexport interface AsyncApiResult<T> extends Promise<ApiResult<T>> {}\n\n/**\n * ApiService provide functions for GET, POST, PUT and DELETE query\n *\n * Usage:\n *\n *  const apiService = new ApiService('kalvad-poc'); // contact center name you want to connect to\n *  apiService.get<User>(apiService.endpoints.authenticate) ; // ApiService already defined the endpoints available on Ziwo API\n *    .then( (e) => console.log('User > ', e.data)); // Request object is available under `data`;\n */\nexport class ApiService {\n\n  public readonly endpoints:any;\n\n  private token?:string;\n  private readonly baseUrl:string;\n  private readonly contactCenterName:string;\n  private readonly API_PROTOCOL = 'https://';\n  private readonly API_PREFIX = '-api.aswat.co';\n\n  constructor(contactCenterName:string) {\n    this.contactCenterName = contactCenterName;\n    this.baseUrl = `${this.API_PROTOCOL}${contactCenterName}${this.API_PREFIX}`;\n    this.endpoints = {\n      authenticate: `/auth/login`,\n      profile: '/profile',\n      autologin: '/agents/autoLogin',\n    };\n  }\n\n  /**\n   * Return the hostname of current user\n   */\n  public getHostname():string {\n    return `${this.contactCenterName}${this.API_PREFIX}`;\n  }\n\n  /**\n   * Set Authorization token for further requests\n   */\n  public setToken(token:string):void {\n    this.token = token;\n  }\n\n  /**\n   * Execute a GET query\n   * @endpoint url endpoint. Base url should not be included\n   */\n  public get<T>(endpoint:string):AsyncApiResult<T> {\n    return this.query<T>(endpoint + `?bc=${Date.now()}`, 'GET');\n  }\n\n  /**\n   * Execute a POST query\n   * @endpoint url endpoint. Base url should not be included\n   */\n  public post<T>(endpoint:string, payload:any):AsyncApiResult<T> {\n    return this.query<T>(endpoint + `?bc=${Date.now()}`, 'POST', payload);\n  }\n\n  /**\n   * Execute a PUT query\n   * @endpoint url endpoint. Base url should not be included\n   */\n  public put<T>(endpoint:string, payload:any):AsyncApiResult<T> {\n    return this.query<T>(endpoint + `?bc=${Date.now()}`, 'PUT', payload);\n  }\n\n  /**\n   * Execute a DELETE query\n   * @endpoint url endpoint. Base url should not be included\n   */\n  public delete<T>(endpoint:string):AsyncApiResult<T> {\n    return this.query<T>(endpoint + `?bc=${Date.now()}`, 'DELETE');\n  }\n\n  private query<T>(endpoint:string, method:'GET'|'POST'|'PUT'|'DELETE', payload?:any):Promise<ApiResult<T>> {\n    return new Promise<ApiResult<T>>((onRes, onErr) => {\n      const fetchOptions:any = {\n        method: method,\n      };\n      if (payload) {\n        fetchOptions.body = JSON.stringify(payload);\n      }\n      window.fetch(`${this.baseUrl}${endpoint}`, {\n        method: method,\n        body: payload ? JSON.stringify(payload) : undefined,\n        headers: {\n          'Content-Type': 'application/json',\n          'access_token': `${this.token}`,\n        }\n      }).then(res => {\n        if (!res.ok) {\n          onErr(`Fetch error: ${res.statusText}`);\n          return;\n        }\n        onRes(res.json());\n      }).catch(err => onErr(err));\n    });\n  }\n\n}\n","import {Call, CallState} from './call';\n\n/**\n * TODO : documentation\n */\n\nexport enum ErrorCode {\n  InvalidPhoneNumber = 2,\n  UserMediaError = 3,\n  AgentNotConnected = 1,\n  ProtocolError = 4,\n}\n\nexport interface ErrorData {\n  code:ErrorCode;\n  message:string;\n  data?:any;\n}\n\nexport interface ZiwoEventDetails {\n  type:ZiwoEventType;\n  currentCall:Call;\n  callID:string;\n  primaryCallID?:string;\n  customerNumber:string;\n  direction:'outbound'|'inbound'|'internal'|'service';\n  stateFlow:CallState[];\n  [key:string]:any; // allow additional information\n}\n\nexport enum ZiwoErrorCode {\n  ProtocolError = 1001,\n  MediaError = 1002,\n  MissingCall = 1003,\n  CannotCreateCall = 1004,\n}\n\nexport enum ZiwoEventType {\n  Error = 'error',\n  Connected = 'connected',\n  Disconnected = 'disconnected',\n  Requesting = 'requesting',\n  Trying = 'trying',\n  Early = 'early',\n  Ringing = 'ringing',\n  Answering = 'answering',\n  Active = 'active',\n  Held = 'held',\n  Hangup = 'hangup',\n  Mute = 'mute',\n  Unmute = 'unmute',\n  Purge = 'purge',\n  Destroy = 'destroy',\n  Recovering = 'recovering',\n}\n\nexport class ZiwoEvent {\n\n  public static listeners:Function[] = [];\n  private static prefixes = ['_jorel-dialog-state-', 'ziwo-'];\n\n  private type:ZiwoEventType;\n  private data:ZiwoEventDetails;\n\n\n  constructor(type:ZiwoEventType, data:ZiwoEventDetails) {\n    this.type = type;\n    this.data = data;\n  }\n\n  public static subscribe(func:Function):void {\n    this.listeners.push(func);\n  }\n\n  public static emit(type:ZiwoEventType, data:ZiwoEventDetails):void {\n    this.listeners.forEach(x => x(type, data));\n    this.dispatchEvents(type, data);\n  }\n\n  public static error(code:ZiwoErrorCode, data:any):void {\n    this.dispatchEvents(ZiwoEventType.Error, {\n      code: code,\n      inner: data,\n    });\n  }\n\n  private static dispatchEvents(type:ZiwoEventType, data:any):void {\n    this.prefixes.forEach(p => window.dispatchEvent(new CustomEvent(`${p}${type}`, {detail: data})));\n  }\n\n  public emit():void {\n    ZiwoEvent.emit(this.type, this.data);\n  }\n\n}\n","\ninterface MicrophoneData {\n  filterNode:BiquadFilterNode;\n  gainNode:GainNode;\n  source:MediaStreamAudioSourceNode;\n}\n\nexport interface MediaInfo {\n  selfTag:HTMLMediaElement;\n  peerTag:HTMLMediaElement;\n}\n\nexport class MediaChannel {\n\n  public readonly stream:any;\n  public remoteStream:any;\n\n  private microphone?:MicrophoneData;\n\n  private readonly audioContext:AudioContext;\n\n  constructor(stream:any) {\n    this.stream = stream;\n    this.audioContext = this.getAudioContext();\n  }\n\n  public static getUserMediaAsChannel(mediaRequested:any):Promise<MediaChannel> {\n    return new Promise<MediaChannel>((onRes, onErr) => {\n      try {\n        navigator.mediaDevices.getUserMedia(mediaRequested).then((stream) => {\n          onRes(new MediaChannel(stream));\n        });\n      } catch (e) {\n        onErr(e);\n      }\n    });\n  }\n\n  public startMicrophone():void {\n    // see https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#BiquadFilterNode-section\n    const filterNode = this.audioContext.createBiquadFilter();\n    filterNode.type = 'highpass';\n    // cutoff frequency: for highpass, audio is attenuated below this frequency\n    filterNode.frequency.value = 10000;\n\n    // create a gain node (to change audio volume)\n    const gainNode = this.audioContext.createGain();\n    // default is 1 (no change); less than 1 means audio is attenuated and vice versa\n    gainNode.gain.value = 0.5;\n\n    const source = this.audioContext.createMediaStreamSource(this.stream);\n\n    this.microphone = {\n      filterNode,\n      gainNode,\n      source,\n    };\n  }\n\n  public bindVideo(el:any):void {\n    el.srcObject = this.stream;\n  }\n\n  private getAudioContext():AudioContext {\n    let audioContext;\n    if (typeof AudioContext === 'function') {\n      audioContext = new AudioContext();\n    } else {\n      throw new Error('Web audio not supported');\n    }\n    return audioContext;\n  }\n\n}\n","export enum VertoMethod {\n  Login = 'login',\n  ClientReady = 'verto.clientReady',\n  Attach = 'verto.attach',\n  Media = 'verto.media',\n  Invite = 'verto.invite',\n  Answer = 'verto.answer',\n  Info = 'verto.info',\n  Modify = 'verto.modify',\n  Display = 'verto.display',\n  Bye = 'verto.bye',\n}\n\nexport enum VertoByeReason {\n  NORMAL_CLEARING = 16,\n  CALL_REJECTED = 21,\n  ORIGINATOR_CANCEL = 487,\n}\n\nexport enum VertoState {\n  Hold = 'hold',\n  Unhold = 'unhold',\n  Purge = 'purge',\n}\n\nexport enum VertoNotificationMessage {\n  CallCreated = 'CALL CREATED',\n  CallEnded = 'CALL ENDED',\n}\n\nexport interface VertoMessage<T> {\n  jsonrpc:'2.0';\n  method:VertoMethod;\n  id:number;\n  params:T;\n}\n\nexport interface VertoNotification<T> {\n  jsonrpc:'2.0';\n  method:VertoMethod;\n  id:number;\n  result:T;\n}\n\nexport interface VertoLogin {}\n\nexport class VertoParams {\n\n  private id = 0;\n\n  public wrap(method:string, params:any = {}, id:number = -1):VertoMessage<any> {\n    this.id += 1;\n    return {\n      jsonrpc: '2.0',\n      method: method as VertoMethod,\n      id: id > 0 ? id : this.id,\n      params: params,\n    };\n  }\n\n  public login(sessid:string, login:string, passwd:string):VertoMessage<any> {\n    return this.wrap(VertoMethod.Login, {\n      sessid,\n      login,\n      passwd\n    });\n  }\n\n  public startCall(sessionId:string|undefined, callId:string, login:string, phoneNumber:string, sdp:string):VertoMessage<any> {\n    return this.wrap(VertoMethod.Invite, {\n        sdp: sdp,\n        sessid: sessionId,\n        dialogParams: this.dialogParams(callId, login, phoneNumber),\n    });\n  }\n\n  public hangupCall(sessionId:string, callId:string, login:string, phoneNumber:string,\n    reason:VertoByeReason = VertoByeReason.NORMAL_CLEARING):VertoMessage<any> {\n    return this.wrap(VertoMethod.Bye, {\n      cause: VertoByeReason[reason],\n      causeCode: reason,\n      dialogParams: this.dialogParams(callId, login, phoneNumber),\n      sessid: sessionId,\n    });\n  }\n\n  public answerCall(sessionId:string|undefined, callId:string, login:string, phoneNumber:string, sdp:string):VertoMessage<any> {\n    return this.wrap(VertoMethod.Answer, {\n        sdp: sdp,\n        sessid: sessionId,\n        dialogParams: this.dialogParams(callId, login, phoneNumber, 'Inbound Call')\n    });\n  }\n\n  public setState(sessionId:string, callId:string, login:string, phoneNumber:string, state:VertoState):VertoMessage<any> {\n    return this.wrap(VertoMethod.Modify, {\n      action: state,\n      dialogParams: this.dialogParams(callId, login, phoneNumber),\n      sessid: sessionId,\n    });\n  }\n\n  public dtfm(sessionId:string, callId:string, login:string, char:string):VertoMessage<any> {\n    return this.wrap(VertoMethod.Info, {\n      sessid: sessionId,\n      dialogParams: {\n        callID: callId,\n        login: login,\n        dtfm: char,\n      }\n    });\n  }\n\n  public getUuid():string {\n    return VertoParams.getUuid();\n  }\n\n  public static getUuid():string {\n    /* tslint:disable */\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      const r = Math.random() * 16 | 0,\n      v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    /* tslint:enable */\n    });\n  }\n\n  private dialogParams(callId:string, login:string, phoneNumber:string, callName = 'Outbound Call'):any {\n    return {\n      callID: callId,\n      caller_id_name: '',\n      caller_id_number: '',\n      dedEnc: false,\n      destination_number: phoneNumber,\n      incomingBandwidth: 'default',\n      localTag: null,\n      login: login,\n      outgoingBandwidth: 'default',\n      remote_caller_id_name: 'Outbound Call',\n      remote_caller_id_number: phoneNumber,\n      screenShare: false,\n      tag: this.getUuid(),\n      useCamera: false,\n      useMic: true,\n      useSpeak: true,\n      useStereo: true,\n      useVideo: undefined,\n      videoParams: {},\n      audioParams: {\n        googAutoGainControl: false,\n        googNoiseSuppression: false,\n        googHighpassFilter: false\n      },\n    };\n  }\n\n}\n","import {MediaChannel} from './media-channel';\nimport {Verto} from './verto/verto';\nimport {ZiwoEventType, ZiwoEvent} from './events';\nimport {RTCPeerConnectionFactory} from './verto/RTCPeerConnection.factory';\nimport { VertoByeReason } from './verto/verto.params';\n\nexport enum CallStatus {\n  Stopped = 'stopped',\n  Running = 'running',\n  OnHold = 'onHold',\n}\n\nexport interface CallComponentsStatus {\n  call:CallStatus;\n  microphone:CallStatus;\n  camera:CallStatus;\n}\n\nexport interface CallState {\n  state:ZiwoEventType;\n  date:Date;\n  dateUNIX:number;\n}\n\n/**\n * Call holds a call information and provide helpers\n */\nexport class Call {\n\n  public readonly callId:string;\n  public readonly primaryCallId?:string;\n  public readonly rtcPeerConnection:RTCPeerConnection;\n  public readonly channel:MediaChannel;\n  public readonly verto:Verto;\n  public readonly phoneNumber:string;\n  public readonly direction:'outbound'|'inbound'|'internal'|'service';\n  public readonly states:CallState[] = [];\n  private status:CallComponentsStatus = {\n    call: CallStatus.Running,\n    microphone: CallStatus.Running,\n    camera: CallStatus.Stopped,\n  };\n  private readonly initialPayload?:any;\n\n  constructor(callId:string, verto:Verto, phoneNumber:string, login:string, rtcPeerConnection:RTCPeerConnection, direction:'outbound'|'inbound', initialPayload?:any) {\n    this.verto = verto;\n    this.callId = callId;\n    this.verto = verto;\n    this.rtcPeerConnection = rtcPeerConnection;\n    this.channel = verto.channel as MediaChannel;\n    this.phoneNumber = phoneNumber;\n    this.direction = direction;\n    this.initialPayload = initialPayload;\n    if (this.initialPayload && this.initialPayload.verto_h_primaryCallID) {\n      this.primaryCallId = this.initialPayload.verto_h_primaryCallID;\n    }\n  }\n\n  public getCallStatus():CallComponentsStatus {\n    return this.status;\n  }\n\n  public answer():void {\n    return this.verto.answerCall(this.callId, this.phoneNumber, this.rtcPeerConnection.localDescription?.sdp as string);\n  }\n\n  public hangup():void {\n    this.verto.hangupCall(this.callId, this.phoneNumber,\n      this.states.findIndex(x => x.state === ZiwoEventType.Answering) >= 0 ? VertoByeReason.NORMAL_CLEARING\n        : (this.direction === 'inbound' ? VertoByeReason.CALL_REJECTED : VertoByeReason.ORIGINATOR_CANCEL));\n    this.status.call = CallStatus.Stopped;\n  }\n\n  public dtfm(char:string):void {\n    this.verto.dtfm(this.callId, char);\n  }\n\n  public hold():void {\n    this.verto.holdCall(this.callId, this.phoneNumber);\n    this.status.call = CallStatus.OnHold;\n  }\n\n  public unhold():void {\n    this.verto.unholdCall(this.callId, this.phoneNumber);\n    this.status.call = CallStatus.Running;\n  }\n\n  public mute():void {\n    this.toggleSelfStream(true);\n    this.status.microphone = CallStatus.OnHold;\n    // Because mute is not sent/received over the socket, we throw the event manually\n    this.pushState(ZiwoEventType.Mute);\n  }\n\n  public unmute():void {\n    this.toggleSelfStream(false);\n    this.status.microphone = CallStatus.Running;\n    this.pushState(ZiwoEventType.Unmute);\n    // Because unmute is not sent/received over the socket, we throw the event manually\n  }\n\n  public pushState(type:ZiwoEventType, broadcast = true):void {\n    const d = new Date();\n    this.states.push({\n      state: type,\n      date: d,\n      dateUNIX: d.getTime() / 1000\n    });\n    if (broadcast) {\n      ZiwoEvent.emit(type, {\n        type,\n        currentCall: this,\n        primaryCallID: this.primaryCallId,\n        callID: this.callId,\n        direction: this.direction,\n        stateFlow: this.states,\n        customerNumber: this.phoneNumber,\n      });\n    }\n  }\n\n  private toggleSelfStream(enabled:boolean):void {\n    this.channel.stream.getAudioTracks().forEach((tr:any) => {\n      tr.enabled = enabled;\n    });\n  }\n\n}\n","import {MediaChannel, MediaInfo} from '../media-channel';\nimport {Verto} from './verto';\n\nexport class RTCPeerConnectionFactory {\n\n  /**\n   * We initiate the call\n   */\n  public static outbound(verto:Verto, callId:string, login:string, phoneNumber:string):RTCPeerConnection {\n    const rtcPeerConnection = new RTCPeerConnection();\n\n    rtcPeerConnection.ontrack = (tr:any) => {\n      const track = tr.track;\n      if (track.kind !== 'audio') {\n        return;\n      }\n      const stream = new MediaStream();\n      stream.addTrack(track);\n      if (!verto.channel) {\n        return;\n      }\n      verto.channel.remoteStream = stream;\n      verto.tags.peerTag.srcObject = stream;\n    };\n\n    if (!verto.channel) {\n      return rtcPeerConnection;\n    }\n\n    // Attach our media stream to the call's PeerConnection\n    verto.channel.stream.getTracks().forEach((track:any) => {\n      rtcPeerConnection.addTrack(track);\n    });\n\n    // We wait for candidate to be null to make sure all candidates have been processed\n    rtcPeerConnection.onicecandidate = (candidate:any) => {\n      if (!candidate.candidate) {\n        verto.send(verto.params.startCall(\n          verto.sessid,\n          callId,\n          login,\n          phoneNumber,\n          rtcPeerConnection.localDescription?.sdp as string)\n        );\n      }\n    };\n\n    rtcPeerConnection.createOffer().then((offer:any) => {\n      rtcPeerConnection.setLocalDescription(offer).then(() => {});\n    });\n    return rtcPeerConnection;\n  }\n\n  /**\n   * We receive the call\n   */\n  public static inbound(verto:Verto, inboudParams:any):Promise<RTCPeerConnection> {\n    return new Promise<RTCPeerConnection>((onRes, onErr) => {\n\n      const rtcPeerConnection = new RTCPeerConnection();\n      rtcPeerConnection.ontrack = (tr:any) => {\n        const track = tr.track;\n        if (track.kind !== 'audio') {\n          return;\n        }\n        const stream = new MediaStream();\n\n        stream.addTrack(track);\n        if (!verto.channel) {\n          return;\n        }\n        verto.channel.remoteStream = stream;\n        verto.tags.peerTag.srcObject = stream;\n      };\n\n\n      if (!verto.channel) {\n        onRes(rtcPeerConnection);\n        return;\n      }\n\n      // Attach our media stream to the call's PeerConnection\n      verto.channel.stream.getTracks().forEach((track:any) => {\n        rtcPeerConnection.addTrack(track);\n      });\n\n      rtcPeerConnection.setRemoteDescription(new RTCSessionDescription({type: 'offer', sdp: inboudParams.sdp}))\n        .then(() => {\n          rtcPeerConnection.createAnswer().then(d => {\n            rtcPeerConnection.setLocalDescription(d);\n          });\n        });\n\n      onRes(rtcPeerConnection);\n    });\n  }\n\n  public static recovering(verto:Verto, params:any):Promise<RTCPeerConnection> {\n    return this.inbound(verto, params);\n  }\n\n}\n","import {VertoMessage, VertoMethod, VertoNotification, VertoState, VertoNotificationMessage} from './verto.params';\nimport {ZiwoEvent, ZiwoEventType, ZiwoEventDetails, ZiwoErrorCode} from '../events';\nimport {Call} from '../call';\nimport {Verto} from './verto';\nimport {RTCPeerConnectionFactory} from './RTCPeerConnection.factory';\n\n/**\n * Verto Orchestrator can be seen as the core component of our Verto implemented\n * Its role is to read all incoming message and act appropriately:\n *  - broadcast important messages as ZiwoEvent (incoming call, call set on hold, call answered, ...)\n *  - run appropriate commands if required by verto protocol (bind stream on verto.mediaRequest, clear call if verto.callDestroyed, ...)\n */\nexport class VertoOrchestrator {\n\n  private readonly debug:boolean;\n  private readonly verto:Verto;\n\n  constructor(verto:Verto, debug:boolean) {\n    this.debug = debug;\n    this.verto = verto;\n  }\n\n  /**\n   * We can identify 2 types of inputs:\n   *  - message (or request): contains a `method` and usually requires further actions\n   *  - notication: does not contain a `method` and does not require further actions. Provide call's update (hold, unhold, ...)\n   */\n  public onInput(message:any, call:Call|undefined):void {\n    return message.method ? this.handleMessage(message, call) : this.handleNotification(message, call);\n  }\n\n  private handleMessage(message:VertoMessage<any>, call:Call|undefined):void {\n    if (this.debug) {\n      console.log('Incoming message ', message);\n    }\n    switch (message.method) {\n      case VertoMethod.ClientReady:\n        return this.onClientReady(message);\n      case VertoMethod.Attach:\n        return this.onAttach(message);\n      case VertoMethod.Media:\n        return !this.ensureCallIsExisting(call) ? undefined\n          : this.onMedia(message, call as Call);\n      case VertoMethod.Invite:\n        this.pushState(call, ZiwoEventType.Trying);\n        return this.onInvite(message);\n      case VertoMethod.Answer:\n        this.pushState(call, ZiwoEventType.Answering);\n        return !this.ensureCallIsExisting(call) ? undefined\n          : this.onAnswer(message, call as Call);\n      case VertoMethod.Display:\n        if (this.ensureCallIsExisting(call)) {\n          (call as Call).pushState(ZiwoEventType.Active);\n        }\n        break;\n      case VertoMethod.Bye:\n        if (this.ensureCallIsExisting(call)) {\n          (call as Call).pushState(ZiwoEventType.Hangup);\n        }\n    }\n    return undefined;\n  }\n\n  private handleNotification(message:VertoNotification<any>, call:Call|undefined):void {\n    if (this.debug) {\n      console.log('Incoming notification ', message);\n    }\n    if (message.result && message.result.message) {\n      switch (message.result.message) {\n        case VertoNotificationMessage.CallCreated:\n          if (this.ensureCallIsExisting(call)) {\n            (call as Call).pushState(ZiwoEventType.Early);\n          }\n          break;\n        case VertoNotificationMessage.CallEnded:\n          if (this.ensureCallIsExisting(call)) {\n            (call as Call).pushState(ZiwoEventType.Hangup);\n          }\n      }\n    }\n    if (message.result && message.result.action) {\n      switch (message.result.action) {\n        case VertoState.Hold:\n          return !this.ensureCallIsExisting(call) ? undefined\n            : this.onHold(call as Call);\n        case VertoState.Unhold:\n          return !this.ensureCallIsExisting(call) ? undefined\n            : this.onUnhold(call as Call);\n      }\n    }\n    return undefined;\n  }\n\n  private onClientReady(message:VertoMessage<any>):void {\n    ZiwoEvent.emit(ZiwoEventType.Connected, {} as ZiwoEventDetails);\n  }\n\n  /***\n   *** MESSAGE SECTION\n   ***/\n\n  /**\n   * OnMedia requires to bind incoming Stream to our call's RtcPeerConnection\n   * It should be transparent to users. No need to broadcast the event\n   */\n  private onMedia(message:VertoMessage<any>, call:Call):void {\n    call.rtcPeerConnection.setRemoteDescription(new RTCSessionDescription({type: 'answer', sdp: message.params.sdp}))\n      .then(() => {\n        if (this.debug) {\n          console.log('Remote media connected');\n        }\n        call.pushState(ZiwoEventType.Active);\n      }).catch(() => {\n        if (this.debug) {\n          console.warn('fail to attach remote media');\n        }\n      });\n  }\n\n  private onInvite(message:VertoMessage<any>):void {\n    RTCPeerConnectionFactory\n      .inbound(this.verto, message.params)\n      .then(pc => {\n        const call = new Call(\n          message.params.callID,\n          this.verto,\n          message.params.verto_h_originalCallerIdNumber,\n          this.verto.getLogin(),\n          pc,\n          'inbound',\n          message.params,\n        );\n        this.verto.calls.push(call);\n        call.pushState(ZiwoEventType.Ringing);\n      });\n  }\n\n  /** Recovering call */\n  private onAttach(message:VertoMessage<any>):void {\n    RTCPeerConnectionFactory.recovering(this.verto, message.params)\n      .then(pc => {\n        const call = new Call(\n          message.params.callID,\n          this.verto,\n          message.params.verto_h_originalCallerIdNumber,\n          this.verto.getLogin(),\n          pc,\n          message.params.display_direction,\n          message.params\n        );\n        this.verto.calls.push(call);\n        call.pushState(ZiwoEventType.Recovering);\n        call.pushState(ZiwoEventType.Active);\n      });\n  }\n\n  /**\n   * Call has been answered by remote. Broadcast the event\n   */\n  private onAnswer(message:VertoMessage<any>, call:Call):void {\n    call.pushState(ZiwoEventType.Answering);\n  }\n\n  /***\n   *** NOTIFICATION SECTION\n   ***/\n\n  private onHold(call:Call):void {\n    call.pushState(ZiwoEventType.Held);\n  }\n\n  private onUnhold(call:Call):void {\n    call.pushState(ZiwoEventType.Active);\n  }\n\n  /***\n   *** OTHERS\n   ***/\n\n  /**\n   * ensureCallIsExisting makes sure the call is not undefined.\n   * If it is undefined, throw a meaningful error message\n   */\n  private ensureCallIsExisting(call:Call|undefined):boolean {\n    if (!call) {\n      ZiwoEvent.error(ZiwoErrorCode.MissingCall, 'Received event from unknown callID');\n      return false;\n    }\n    return true;\n  }\n\n  private pushState(call:Call|undefined, state:ZiwoEventType):void {\n    if (call) {\n      call.pushState(state);\n    }\n  }\n\n}\n","import {Verto} from './verto';\nimport {Call} from '../call';\nimport {ZiwoEventType} from '../events';\n\nexport class VertoClear {\n\n  private verto:Verto;\n  private debug:boolean;\n  private readonly eventType:'unload'|'beforeunload';\n\n  constructor(verto:Verto, debug:boolean) {\n    this.verto = verto;\n    this.debug = debug;\n    this.eventType = this.debug ? 'beforeunload' : 'unload';\n  }\n\n  /**\n   * When user closes the tab, we need to purge the call\n   *  - for on going call(s): purge\n   *  - for ended call(s): purge + destroy\n   */\n  public prepareUnloadEvent():void {\n    window.addEventListener(this.eventType, (e) => {\n      this.purge(this.verto.calls);\n    }, false);\n    if (this.debug) {\n      /**\n       * this display a validation popup before closing the tab.\n       * Gives us time to check the console ;) || uncomment for testing\n       */\n      // window.onbeforeunload = () => {\n      // return 'Purging calls';\n      // };\n    }\n  }\n\n  public destroyCall(call:Call):void {\n    if (call.states.findIndex(x => x.state === ZiwoEventType.Hangup) === -1) {\n      call.hangup();\n    }\n    if (call.channel.stream) {\n      // tslint:disable-next-line: triple-equals\n      if (typeof call.channel.stream.stop == 'function') {\n        call.channel.stream.stop();\n      } else {\n        if (call.channel.stream.active) {\n          const tracks = call.channel.stream.getTracks();\n          tracks.forEach((tr:any) => tr.stop());\n        }\n      }\n    }\n    // tslint:disable-next-line: triple-equals\n    if (call.channel.remoteStream && call.channel.remoteStream == 'function') {\n      call.channel.remoteStream.stop();\n    }\n  }\n\n  private purge(calls:Call[]):void {\n    if (this.debug) {\n      console.log('PURGE > ', calls);\n    }\n    calls.forEach(c => this.verto.purgeCall(c.callId, c.phoneNumber));\n  }\n\n}\n","import {VertoParams} from './verto.params';\n\nexport class VertoSession {\n\n  private static readonly storageKey = 'ziwo_socket_session_id';\n\n  /**\n   * get will fetch local storage to retrieve existing SessionId\n   * If no SessionId are found in storage, we generate a new one\n   */\n  public static get():string {\n    const v = window.sessionStorage.getItem(this.storageKey);\n    if (v) {\n      return v;\n    }\n    const newId = VertoParams.getUuid();\n    window.sessionStorage.setItem(this.storageKey, newId);\n    return newId;\n  }\n\n}\n","import {AgentPosition, AgentInfo} from '../authentication.service';\nimport {MediaChannel, MediaInfo} from '../media-channel';\nimport {Call} from '../call';\nimport {VertoParams, VertoByeReason, VertoState} from './verto.params';\nimport {VertoOrchestrator} from './verto.orchestrator';\nimport {ZiwoEvent, ZiwoErrorCode, ZiwoEventType} from '../events';\nimport {MESSAGES} from '../messages';\nimport {RTCPeerConnectionFactory} from './RTCPeerConnection.factory';\nimport {VertoClear} from './verto.clear';\nimport { VertoSession } from './verto.session';\n\n/**\n * JsonRpcClient implements Verto protocol using JSON RPC\n *\n * Usage:\n *  - const client = new JsonRpcClient(@debug); // Instantiate a new Json Rpc Client\n *  - client.openSocket(@socketUrl) // REQUIRED: Promise opening the web socket\n *      .then(() => {\n *        this.login() // REQUIRED: log the agent into the web socket\n *        // You can now proceed with any requests\n *      });\n *\n */\nexport class Verto {\n\n  /**\n   * Media video tags\n   */\n  public tags:MediaInfo;\n\n  /**\n   *\n   */\n  public params:VertoParams;\n\n  /**\n   * Session ID used with the current socket\n   */\n  public sessid?:string;\n\n  /**\n   * User Media Channel\n   */\n  public channel?:MediaChannel;\n\n  /**\n   * Our communication channel\n   */\n  private socket?:WebSocket;\n\n  /**\n   * Information about agent\n   */\n  private position?:AgentPosition;\n\n  /**\n   * Callback functions - register using `addListener`\n   */\n  private listeners:Function[] = [];\n\n  // Components\n  private orchestrator:VertoOrchestrator;\n  private cleaner:VertoClear;\n\n  private readonly debug:boolean;\n\n  private readonly STUN_ICE_SERVER = 'stun:stun.l.google.com:19302';\n\n  /**\n   * Reference to list of running calls\n   */\n  public readonly calls:Call[];\n\n  constructor(calls:Call[], debug:boolean, tags:MediaInfo) {\n    this.debug = debug;\n    this.tags = tags;\n    this.orchestrator = new VertoOrchestrator(this, this.debug);\n    this.cleaner = new VertoClear(this, this.debug);\n    this.params = new VertoParams();\n    this.calls = calls;\n  }\n\n\n  /**\n   * addListener allows to listen for incoming Socket Event\n   */\n  public addListener(call:Function):void {\n    this.listeners.push(call);\n  }\n\n  public connectAgent(agent:AgentInfo):Promise<AgentInfo> {\n    return new Promise<AgentInfo>((onRes, onErr) => {\n      // First we make ensure access to microphone &| camera\n      // And wait for the socket to open\n      Promise.all([\n        MediaChannel.getUserMediaAsChannel({audio: true, video: false}),\n        this.openSocket(agent.webRtc.socket),\n      ]).then(res => {\n        this.channel = res[0];\n        this.login(agent.position);\n      }).catch(err => {\n        onErr(err);\n      });\n    });\n  }\n\n  /**\n   * send a start call request\n   */\n  public startCall(phoneNumber:string):Call|undefined {\n    if (!this.channel || !this.channel.stream) {\n      // TODO : throw Ziwo Error Event\n      throw new Error('Error in User Media');\n    }\n    try {\n      const callId = this.params.getUuid();\n      const pc = RTCPeerConnectionFactory.outbound(this, callId, this.getLogin(), phoneNumber);\n      const call = new Call(callId, this, phoneNumber, this.getLogin(), pc, 'outbound');\n      call.pushState(ZiwoEventType.Requesting, true);\n      call.pushState(ZiwoEventType.Trying, true);\n      return call;\n    } catch (e) {\n      ZiwoEvent.error(ZiwoErrorCode.CannotCreateCall, e);\n      return undefined;\n    }\n  }\n\n  /**\n   * Answer a call\n   */\n  public answerCall(callId:string, phoneNumber:string, sdp:string):void {\n    try {\n      this.send(this.params.answerCall(this.sessid as string, callId, this.getLogin(), phoneNumber, sdp));\n      const c = this.calls.find(x => x.callId === callId);\n      if (c) {\n        c.pushState(ZiwoEventType.Active);\n      }\n    } catch (e) {\n      ZiwoEvent.error(ZiwoErrorCode.MissingCall, e);\n    }\n  }\n\n  /**\n   * Hang up a specific call\n   */\n  public hangupCall(callId:string, phoneNumber:string, reason:VertoByeReason = VertoByeReason.NORMAL_CLEARING):void {\n    // this.send(this.params.hangupCall(this.sessid as string, callId, this.getLogin(), phoneNumber, reason));\n    this.destroyCall(callId);\n  }\n\n  /**\n   * Hold a specific call\n   */\n  public holdCall(callId:string, phoneNumber:string):void {\n    this.send(this.params.setState(this.sessid as string, callId, this.getLogin(), phoneNumber, VertoState.Hold));\n  }\n\n  /**\n   * Hang up a specific call\n   */\n  public unholdCall(callId:string, phoneNumber:string):void {\n    this.send(this.params.setState(this.sessid as string, callId, this.getLogin(), phoneNumber, VertoState.Unhold));\n  }\n\n  /**\n   * Purge a specific call\n   */\n  public purgeCall(callId:string, phoneNumber:string):void {\n    const call = this.calls.find(x => x.callId === callId);\n    if (call) {\n      call.pushState(ZiwoEventType.Purge);\n    }\n    this.send(this.params.setState(this.sessid as string, callId, this.getLogin(), phoneNumber, VertoState.Purge));\n  }\n\n  /**\n   * Destroy a specific call.\n   */\n  public destroyCall(callId:string):void {\n    const callIndex = this.calls.findIndex(x => x.callId === callId);\n    if (callIndex === -1) {\n      return;\n    }\n    this.calls[callIndex].pushState(ZiwoEventType.Destroy);\n    this.cleaner.destroyCall(this.calls[callIndex]);\n    this.calls.splice(callIndex, 1);\n  }\n\n  /**\n   * Purge & Destroy a specific call.\n   */\n  public purgeAndDestroyCall(callId:string, phoneNumber:string, removeFromList = true):void {\n    this.purgeCall(callId, phoneNumber);\n    this.destroyCall(callId);\n  }\n\n  /**\n   * DTFM send a char to current call\n   */\n  public dtfm(callId:string, char:string):void {\n    this.send(this.params.dtfm(this.sessid as string, callId, this.getLogin(), char));\n  }\n\n  /**\n   * Send data to socket and log in case of debug\n   */\n  public send(data:any):void {\n    if (this.debug) {\n      console.log('Write message > ', data);\n    }\n    if (!this.socket) {\n      return;\n    }\n    this.socket.send(JSON.stringify(data));\n  }\n\n  /**\n   * login log the agent in the newly created socket\n   */\n  private login(agentPosition:AgentPosition):Promise<void> {\n    this.position = agentPosition;\n    return new Promise<void>((onRes, onErr) => {\n      if (!this.socket) {\n        return onErr();\n      }\n      this.sessid = VertoSession.get();\n      this.send(this.params.login(this.sessid, agentPosition.name, agentPosition.password));\n    });\n  }\n\n  /**\n   * openSocket should be called directly after the constructor\n   * It initializate the socket and set the handlers\n   */\n  private openSocket(socketUrl:string):Promise<void> {\n    return new Promise<void>((onRes, onErr) => {\n      this.socket = new WebSocket(socketUrl);\n      this.socket.onclose = () => {\n        if (this.debug) {\n          console.log('Socket closed');\n        }\n      };\n      this.socket.onopen = () => {\n        if (this.debug) {\n          console.log('Socket opened');\n        }\n        // clear.prepareUnloadEvent makes sure we clear the calls properly when user closes the tab\n        this.cleaner.prepareUnloadEvent();\n        onRes();\n      };\n      this.socket.onmessage = (msg) => {\n        try {\n          const data = JSON.parse(msg.data);\n          if (!this.isJsonRpcValid) {\n            ZiwoEvent.error(ZiwoErrorCode.ProtocolError, data);\n            throw new Error('Message is not a valid format');\n          }\n          const callId = data.params && data.params.callID ? data.params.callID :\n            (data.result && data.result.callID ? data.result.callID : undefined);\n          const relatedCall = callId ? this.calls.find(c => c.callId === callId) : undefined;\n          this.orchestrator.onInput(data, relatedCall);\n        } catch (err) {\n          ZiwoEvent.error(ZiwoErrorCode.ProtocolError, err);\n          if (this.debug) {\n            console.warn('Invalid incoming message', err);\n          }\n        }\n      };\n    });\n  }\n\n  public getNewRTCPeerConnection():RTCPeerConnection {\n    const rtcPeerConnection = new RTCPeerConnection({\n      iceServers: [{urls: this.STUN_ICE_SERVER}],\n    });\n\n    return rtcPeerConnection;\n  }\n\n  /**\n   * Concat position to return the login used in Json RTC request\n   */\n  public getLogin():string {\n    return `${this.position?.name}@${this.position?.hostname}`;\n  }\n\n  protected ensureMediaChannelIsValid():boolean {\n    if (!this.channel || !this.channel.stream) {\n      ZiwoEvent.error(ZiwoErrorCode.MediaError, MESSAGES.MEDIA_ERROR);\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Validate the JSON RPC headersx\n   */\n  private isJsonRpcValid(data:any):boolean {\n    return typeof data === 'object'\n      && 'jsonrpc' in data\n      && data.jsonrpc === '2.0';\n  }\n\n}\n","import {Credentials, AuthenticationService, AgentInfo, AgentPosition, ManualPosition} from './authentication.service';\nimport {ApiService} from './api.service';\nimport {ZiwoEvent, ZiwoEventType} from './events';\nimport {MediaInfo} from './media-channel';\nimport {Call} from './call';\nimport {Verto} from './verto/verto';\n\n/**\n * ziwo-core-front provides a client for real time communication using WebRTC integrated with Ziwo\n */\n\nexport interface ZiwoClientOptions {\n  /**\n   * @contactCenterName is the contact center the agent is working for\n   */\n  contactCenterName:string;\n\n  /**\n   * see `authentication.ts#Credentials` for complete definition\n   */\n  credentials:Credentials;\n\n  /**\n   * Allow to connect agent to a specific position\n   */\n  position?:ManualPosition;\n\n  /**\n   * @autoConnect let you choose to connect the agent automatically or not.\n   * Default = true\n   * Error is raised if authentication fails. In case you want to handle failed authentication, run `connect` manually\n   */\n  autoConnect:boolean;\n\n  /**\n   * @tags\n   */\n  tags:MediaInfo;\n\n  debug?:boolean;\n}\n\nexport class ZiwoClient {\n\n  public readonly options:ZiwoClientOptions;\n\n  private readonly calls:Call[] = [];\n  private connectedAgent?:AgentInfo;\n  private apiService:ApiService;\n  private verto:Verto;\n  private readonly debug:boolean;\n\n  constructor(options:ZiwoClientOptions) {\n    this.options = options;\n    this.debug = options.debug || false;\n    this.apiService = new ApiService(options.contactCenterName);\n    this.verto = new Verto(this.calls, this.debug, options.tags);\n\n    if (options.autoConnect) {\n      this.connect().then(r => {\n      }).catch(err => { throw err; });\n    }\n  }\n\n  /**\n   * connect authenticate the user over Ziwo & our communication socket\n   * This function is required before proceeding with calls\n   */\n  public connect():Promise<void> {\n    return new Promise<any>((onRes, onErr) => {\n      AuthenticationService.authenticate(this.apiService, this.options.credentials)\n        .then(res => {\n          this.connectedAgent = res;\n          this.verto.connectAgent(this.connectedAgent);\n          onRes();\n        }).catch(err => onErr(err));\n    });\n  }\n\n  public addListener(func:Function):void {\n    return ZiwoEvent.subscribe(func);\n  }\n\n  public startCall(phoneNumber:string):Call|undefined {\n    const call = this.verto.startCall(phoneNumber);\n    if (!call) {\n      return undefined;\n    }\n    this.calls.push(call);\n    return call;\n  }\n\n}\n"],"names":[],"mappings":"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F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBACvF,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBACvF,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;gBAC1F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBACvF,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC5F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAC3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;gBAE3F,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC3C,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC3C,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC3C,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;aAC9C;YAED,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACzG,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC;SAC7B;QA5Qc,KAAC,GAAiC,KAAK,EAAE,CAAC;QAU1C,OAAG,GAAW,CAAC,CAAC;QAChB,OAAG,GAAW,EAAE,CAAC;QACjB,OAAG,GAAW,EAAE,CAAC;QACjB,OAAG,GAAW,EAAE,CAAC;QACjB,OAAG,GAAW,CAAC,CAAC;QAChB,OAAG,GAAW,CAAC,CAAC;QAChB,OAAG,GAAW,EAAE,CAAC;QACjB,OAAG,GAAW,EAAE,CAAC;QACjB,OAAG,GAAW,CAAC,CAAC;QAChB,OAAG,GAAW,EAAE,CAAC;QACjB,OAAG,GAAW,EAAE,CAAC;QACjB,OAAG,GAAW,EAAE,CAAC;QACjB,OAAG,GAAW,CAAC,CAAC;QAChB,OAAG,GAAW,EAAE,CAAC;QACjB,OAAG,GAAW,EAAE,CAAC;QACjB,OAAG,GAAW,EAAE,CAAC;QAEjB,cAAU,GAAa,UAAE,MAAc,EAAE,UAAkB,IAAe,OAAA,CAAC,MAAM,IAAI,UAAU,KAAK,MAAM,MAAM,EAAE,GAAG,UAAU,CAAC,CAAC,GAAA,CAAC;QAsClI,KAAC,GAAa,UAAE,CAAS,EAAE,CAAS,EAAE,CAAS,IAAe,OAAA,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAA,CAAC;QAEnF,KAAC,GAAa,UAAE,CAAS,EAAE,CAAS,EAAE,CAAS,IAAe,OAAA,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAA,CAAC;QAEnF,KAAC,GAAa,UAAE,CAAS,EAAE,CAAS,EAAE,CAAS,IAAe,QAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAC,CAAC;QAE1E,KAAC,GAAa,UAAE,CAAS,EAAE,CAAS,EAAE,CAAS,IAAe,QAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAC,CAAC;QAsMlG,UAAC;KAAA,IAAA;;;IChRD,MAAM,cAAc,GAAG,wBAAwB,CAAC;AAEhD,IAAO,MAAM,QAAQ,GAAG;QACtB,gCAAgC,EAAE,GAAG,cAAc,0EAA0E;QAC7H,oBAAoB,EAAE,CAAC,WAAkB,KAAK,GAAG,WAAW,8BAA8B;QAC1F,mBAAmB,EAAE,CAAC,MAAa,KAAK,2CAA2C,MAAM,GAAG;QAC5F,WAAW,EAAE,GAAG,cAAc,8BAA8B;KAC7D,CAAC;;;IC0BF,IAAK,UAEJ;IAFD,WAAK,UAAU;QACb,+BAAiB,CAAA;IACnB,CAAC,EAFI,UAAU,KAAV,UAAU,QAEd;IAED,IAAK,QAEJ;IAFD,WAAK,QAAQ;QACX,2BAAe,CAAA;IACjB,CAAC,EAFI,QAAQ,KAAR,QAAQ,QAEZ;IAED,IAAK,eAEJ;IAFD,WAAK,eAAe;QAClB,iCAAc,CAAA;IAChB,CAAC,EAFI,eAAe,KAAf,eAAe,QAEnB;AA4FD,UAAa,qBAAqB;QAEhC,iBAAgB;QAET,OAAO,YAAY,CAAC,GAAc,EAAE,WAAuB;YAChE,IAAI,WAAW,CAAC,mBAAmB,EAAE;gBACnC,GAAG,CAAC,QAAQ,CAAC,WAAW,CAAC,mBAAmB,CAAC,CAAC;gBAC9C,OAAO,IAAI,OAAO,CAAM,CAAC,KAAK,EAAE,KAAK;oBACnC,OAAO,CAAC,GAAG,CAAC;wBACV,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;wBACnB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;qBACpB,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;iBACxD,CAAC,CAAC;aACJ;YACD,IAAI,CAAC,WAAW,CAAC,KAAK,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE;gBAC/C,MAAM,IAAI,KAAK,CAAC,QAAQ,CAAC,gCAAgC,CAAC,CAAC;aAC5D;YACD,OAAO,IAAI,OAAO,CAAM,CAAC,KAAK,EAAE,KAAK;gBACnC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,WAAW,CAAC,KAAK,EAAE,WAAW,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC;oBAChE,OAAO,CAAC,GAAG,CAAC;wBACV,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;wBACnB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;qBACpB,CAAC,CAAC,IAAI,CAAC,GAAG;wBACT,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;qBACf,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;iBAC7B,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aAC7B,CAAC,CAAC;SACJ;QAEO,OAAO,SAAS,CAAC,GAAc,EAAE,KAAY,EAAE,QAAe;YACpE,OAAO,IAAI,OAAO,CAAO,CAAC,KAAK,EAAE,KAAK;gBACpC,GAAG,CAAC,IAAI,CAAO,GAAG,CAAC,SAAS,CAAC,YAAY,EAAE;oBACzC,QAAQ,EAAE,KAAK;oBACf,QAAQ,EAAE,QAAQ;iBACnB,CAAC,CAAC,IAAI,CAAC,CAAC;oBACP,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;oBACrC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;iBAClB,CAAC,CAAC,KAAK,CAAC,CAAC;oBACR,KAAK,CAAC,CAAC,CAAC,CAAC;iBACV,CAAC,CAAC;aACJ,CAAC,CAAC;SACJ;QAEO,OAAO,SAAS,CAAC,GAAc;YACrC,OAAO,GAAG,CAAC,GAAG,CAAM,mBAAmB,EAAE,EAAE,CAAC,CAAC;SAC9C;QAEO,OAAO,SAAS,CAAC,GAAc;YACrC,OAAO,IAAI,OAAO,CAAY,CAAC,KAAK,EAAE,KAAK;gBACzC,OAAO,CAAC,GAAG,CAAC;oBACV,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC;oBAC3B,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC;oBACzB,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC;oBAC1B,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC;iBAC5B,CAAC,CAAC,IAAI,CAAC,GAAG;oBACT,KAAK,CAAC;wBACJ,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;wBAChB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE;wBACpB,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE;wBACrB,MAAM,EAAE;4BACN,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,QAAQ,MAAM,GAAG,CAAC,WAAW,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,EAAE;yBACvF;wBACD,QAAQ,EAAE;4BACR,IAAI,EAAE,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE;4BAC/B,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC,CAAC,QAAQ,EAAE;4BACtE,QAAQ,EAAE,GAAG,CAAC,WAAW,EAAE;yBAC5B;qBACF,CAAC,CAAC;iBACJ,CAAC;qBACD,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aAC3B,CAAC,CAAC;SACJ;QAEO,OAAO,iBAAiB,CAAC,GAAc;YAC7C,OAAO,IAAI,OAAO,CAAM,CAAC,KAAK,EAAE,KAAK;gBACnC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG;oBACrC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;iBACpB,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aAC7B,CAAC,CAAC;SACJ;QAEO,OAAO,eAAe,CAAC,GAAc;YAC3C,OAAO,IAAI,OAAO,CAAM,CAAC,KAAK,EAAE,KAAK;gBACnC,GAAG,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC,IAAI,CAAC,GAAG;oBACnD,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;iBACpB,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aAC7B,CAAC,CAAC;SACJ;QAEO,OAAO,gBAAgB,CAAC,GAAc;YAC5C,OAAO,IAAI,OAAO,CAAM,CAAC,KAAK,EAAE,KAAK;gBACnC,GAAG,CAAC,GAAG,CAAC,oCAAoC,CAAC,CAAC,IAAI,CAAC,GAAG;oBACpD,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;iBACpB,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aAC7B,CAAC,CAAC;SACJ;QAEO,OAAO,iBAAiB,CAAC,GAAc;YAC7C,OAAO,IAAI,OAAO,CAAM,CAAC,KAAK,EAAE,KAAK;gBACnC,GAAG,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,GAAG;oBACnC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;iBACpB,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aAC7B,CAAC,CAAC;SACJ;KAEF;;ICvOD;;;;;;;;;AASA,UAAa,UAAU;QAUrB,YAAY,iBAAwB;YAHnB,iBAAY,GAAG,UAAU,CAAC;YAC1B,eAAU,GAAG,eAAe,CAAC;YAG5C,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;YAC3C,IAAI,CAAC,OAAO,GAAG,GAAG,IAAI,CAAC,YAAY,GAAG,iBAAiB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YAC5E,IAAI,CAAC,SAAS,GAAG;gBACf,YAAY,EAAE,aAAa;gBAC3B,OAAO,EAAE,UAAU;gBACnB,SAAS,EAAE,mBAAmB;aAC/B,CAAC;SACH;;;;QAKM,WAAW;YAChB,OAAO,GAAG,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;SACtD;;;;QAKM,QAAQ,CAAC,KAAY;YAC1B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACpB;;;;;QAMM,GAAG,CAAI,QAAe;YAC3B,OAAO,IAAI,CAAC,KAAK,CAAI,QAAQ,GAAG,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC;SAC7D;;;;;QAMM,IAAI,CAAI,QAAe,EAAE,OAAW;YACzC,OAAO,IAAI,CAAC,KAAK,CAAI,QAAQ,GAAG,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;SACvE;;;;;QAMM,GAAG,CAAI,QAAe,EAAE,OAAW;YACxC,OAAO,IAAI,CAAC,KAAK,CAAI,QAAQ,GAAG,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;SACtE;;;;;QAMM,MAAM,CAAI,QAAe;YAC9B,OAAO,IAAI,CAAC,KAAK,CAAI,QAAQ,GAAG,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,QAAQ,CAAC,CAAC;SAChE;QAEO,KAAK,CAAI,QAAe,EAAE,MAAkC,EAAE,OAAY;YAChF,OAAO,IAAI,OAAO,CAAe,CAAC,KAAK,EAAE,KAAK;gBAC5C,MAAM,YAAY,GAAO;oBACvB,MAAM,EAAE,MAAM;iBACf,CAAC;gBACF,IAAI,OAAO,EAAE;oBACX,YAAY,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;iBAC7C;gBACD,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,OAAO,GAAG,QAAQ,EAAE,EAAE;oBACzC,MAAM,EAAE,MAAM;oBACd,IAAI,EAAE,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,SAAS;oBACnD,OAAO,EAAE;wBACP,cAAc,EAAE,kBAAkB;wBAClC,cAAc,EAAE,GAAG,IAAI,CAAC,KAAK,EAAE;qBAChC;iBACF,CAAC,CAAC,IAAI,CAAC,GAAG;oBACT,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE;wBACX,KAAK,CAAC,gBAAgB,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC;wBACxC,OAAO;qBACR;oBACD,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;iBACnB,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aAC7B,CAAC,CAAC;SACJ;KAEF;;;IC3GD;;;AAIA,IAAA,IAAY,SAKX;IALD,WAAY,SAAS;QACnB,qEAAsB,CAAA;QACtB,6DAAkB,CAAA;QAClB,mEAAqB,CAAA;QACrB,2DAAiB,CAAA;IACnB,CAAC,EALW,SAAS,KAAT,SAAS,QAKpB;AAmBD,IAAA,IAAY,aAKX;IALD,WAAY,aAAa;QACvB,sEAAoB,CAAA;QACpB,gEAAiB,CAAA;QACjB,kEAAkB,CAAA;QAClB,4EAAuB,CAAA;IACzB,CAAC,EALW,aAAa,KAAb,aAAa,QAKxB;AAED,IAAA,IAAY,aAiBX;IAjBD,WAAY,aAAa;QACvB,gCAAe,CAAA;QACf,wCAAuB,CAAA;QACvB,8CAA6B,CAAA;QAC7B,0CAAyB,CAAA;QACzB,kCAAiB,CAAA;QACjB,gCAAe,CAAA;QACf,oCAAmB,CAAA;QACnB,wCAAuB,CAAA;QACvB,kCAAiB,CAAA;QACjB,8BAAa,CAAA;QACb,kCAAiB,CAAA;QACjB,8BAAa,CAAA;QACb,kCAAiB,CAAA;QACjB,gCAAe,CAAA;QACf,oCAAmB,CAAA;QACnB,0CAAyB,CAAA;IAC3B,CAAC,EAjBW,aAAa,KAAb,aAAa,QAiBxB;AAED,UAAa,SAAS;QASpB,YAAY,IAAkB,EAAE,IAAqB;YACnD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;SAClB;QAEM,OAAO,SAAS,CAAC,IAAa;YACnC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC3B;QAEM,OAAO,IAAI,CAAC,IAAkB,EAAE,IAAqB;YAC1D,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SACjC;QAEM,OAAO,KAAK,CAAC,IAAkB,EAAE,IAAQ;YAC9C,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,KAAK,EAAE;gBACvC,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,IAAI;aACZ,CAAC,CAAC;SACJ;QAEO,OAAO,cAAc,CAAC,IAAkB,EAAE,IAAQ;YACxD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,MAAM,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,GAAG,CAAC,GAAG,IAAI,EAAE,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC,CAAC;SAClG;QAEM,IAAI;YACT,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;SACtC;;IAlCa,mBAAS,GAAc,EAAE,CAAC;IACzB,kBAAQ,GAAG,CAAC,sBAAsB,EAAE,OAAO,CAAC,CAAC;;;UC/CjD,YAAY;QASvB,YAAY,MAAU;YACpB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;SAC5C;QAEM,OAAO,qBAAqB,CAAC,cAAkB;YACpD,OAAO,IAAI,OAAO,CAAe,CAAC,KAAK,EAAE,KAAK;gBAC5C,IAAI;oBACF,SAAS,CAAC,YAAY,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM;wBAC9D,KAAK,CAAC,IAAI,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;qBACjC,CAAC,CAAC;iBACJ;gBAAC,OAAO,CAAC,EAAE;oBACV,KAAK,CAAC,CAAC,CAAC,CAAC;iBACV;aACF,CAAC,CAAC;SACJ;QAEM,eAAe;;YAEpB,MAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,kBAAkB,EAAE,CAAC;YAC1D,UAAU,CAAC,IAAI,GAAG,UAAU,CAAC;;YAE7B,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;;YAGnC,MAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC;;YAEhD,QAAQ,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;YAE1B,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,uBAAuB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAEtE,IAAI,CAAC,UAAU,GAAG;gBAChB,UAAU;gBACV,QAAQ;gBACR,MAAM;aACP,CAAC;SACH;QAEM,SAAS,CAAC,EAAM;YACrB,EAAE,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC;SAC5B;QAEO,eAAe;YACrB,IAAI,YAAY,CAAC;YACjB,IAAI,OAAO,YAAY,KAAK,UAAU,EAAE;gBACtC,YAAY,GAAG,IAAI,YAAY,EAAE,CAAC;aACnC;iBAAM;gBACL,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;aAC5C;YACD,OAAO,YAAY,CAAC;SACrB;KAEF;;;ICzED,IAAY,WAWX;IAXD,WAAY,WAAW;QACrB,8BAAe,CAAA;QACf,gDAAiC,CAAA;QACjC,sCAAuB,CAAA;QACvB,oCAAqB,CAAA;QACrB,sCAAuB,CAAA;QACvB,sCAAuB,CAAA;QACvB,kCAAmB,CAAA;QACnB,sCAAuB,CAAA;QACvB,wCAAyB,CAAA;QACzB,gCAAiB,CAAA;IACnB,CAAC,EAXW,WAAW,KAAX,WAAW,QAWtB;AAED,IAAA,IAAY,cAIX;IAJD,WAAY,cAAc;QACxB,0EAAoB,CAAA;QACpB,sEAAkB,CAAA;QAClB,+EAAuB,CAAA;IACzB,CAAC,EAJW,cAAc,KAAd,cAAc,QAIzB;AAED,IAAA,IAAY,UAIX;IAJD,WAAY,UAAU;QACpB,2BAAa,CAAA;QACb,+BAAiB,CAAA;QACjB,6BAAe,CAAA;IACjB,CAAC,EAJW,UAAU,KAAV,UAAU,QAIrB;AAED,IAAA,IAAY,wBAGX;IAHD,WAAY,wBAAwB;QAClC,wDAA4B,CAAA;QAC5B,oDAAwB,CAAA;IAC1B,CAAC,EAHW,wBAAwB,KAAxB,wBAAwB,QAGnC;AAkBD,UAAa,WAAW;QAAxB;YAEU,OAAE,GAAG,CAAC,CAAC;SA4GhB;QA1GQ,IAAI,CAAC,MAAa,EAAE,SAAa,EAAE,EAAE,KAAY,CAAC,CAAC;YACxD,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;YACb,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,MAAM,EAAE,MAAqB;gBAC7B,EAAE,EAAE,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE;gBACzB,MAAM,EAAE,MAAM;aACf,CAAC;SACH;QAEM,KAAK,CAAC,MAAa,EAAE,KAAY,EAAE,MAAa;YACrD,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE;gBAClC,MAAM;gBACN,KAAK;gBACL,MAAM;aACP,CAAC,CAAC;SACJ;QAEM,SAAS,CAAC,SAA0B,EAAE,MAAa,EAAE,KAAY,EAAE,WAAkB,EAAE,GAAU;YACtG,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;gBACjC,GAAG,EAAE,GAAG;gBACR,MAAM,EAAE,SAAS;gBACjB,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,WAAW,CAAC;aAC9D,CAAC,CAAC;SACJ;QAEM,UAAU,CAAC,SAAgB,EAAE,MAAa,EAAE,KAAY,EAAE,WAAkB,EACjF,SAAwB,cAAc,CAAC,eAAe;YACtD,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE;gBAChC,KAAK,EAAE,cAAc,CAAC,MAAM,CAAC;gBAC7B,SAAS,EAAE,MAAM;gBACjB,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,WAAW,CAAC;gBAC3D,MAAM,EAAE,SAAS;aAClB,CAAC,CAAC;SACJ;QAEM,UAAU,CAAC,SAA0B,EAAE,MAAa,EAAE,KAAY,EAAE,WAAkB,EAAE,GAAU;YACvG,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;gBACjC,GAAG,EAAE,GAAG;gBACR,MAAM,EAAE,SAAS;gBACjB,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,cAAc,CAAC;aAC9E,CAAC,CAAC;SACJ;QAEM,QAAQ,CAAC,SAAgB,EAAE,MAAa,EAAE,KAAY,EAAE,WAAkB,EAAE,KAAgB;YACjG,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;gBACnC,MAAM,EAAE,KAAK;gBACb,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,WAAW,CAAC;gBAC3D,MAAM,EAAE,SAAS;aAClB,CAAC,CAAC;SACJ;QAEM,IAAI,CAAC,SAAgB,EAAE,MAAa,EAAE,KAAY,EAAE,IAAW;YACpE,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE;gBACjC,MAAM,EAAE,SAAS;gBACjB,YAAY,EAAE;oBACZ,MAAM,EAAE,MAAM;oBACd,KAAK,EAAE,KAAK;oBACZ,IAAI,EAAE,IAAI;iBACX;aACF,CAAC,CAAC;SACJ;QAEM,OAAO;YACZ,OAAO,WAAW,CAAC,OAAO,EAAE,CAAC;SAC9B;QAEM,OAAO,OAAO;;YAEnB,OAAO,sCAAsC,CAAC,OAAO,CAAC,OAAO,EAAE,UAAS,CAAC;gBACvE,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,EAChC,CAAC,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;gBACnC,OAAO,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;;aAEvB,CAAC,CAAC;SACJ;QAEO,YAAY,CAAC,MAAa,EAAE,KAAY,EAAE,WAAkB,EAAE,QAAQ,GAAG,eAAe;YAC9F,OAAO;gBACL,MAAM,EAAE,MAAM;gBACd,cAAc,EAAE,EAAE;gBAClB,gBAAgB,EAAE,EAAE;gBACpB,MAAM,EAAE,KAAK;gBACb,kBAAkB,EAAE,WAAW;gBAC/B,iBAAiB,EAAE,SAAS;gBAC5B,QAAQ,EAAE,IAAI;gBACd,KAAK,EAAE,KAAK;gBACZ,iBAAiB,EAAE,SAAS;gBAC5B,qBAAqB,EAAE,eAAe;gBACtC,uBAAuB,EAAE,WAAW;gBACpC,WAAW,EAAE,KAAK;gBAClB,GAAG,EAAE,IAAI,CAAC,OAAO,EAAE;gBACnB,SAAS,EAAE,KAAK;gBAChB,MAAM,EAAE,IAAI;gBACZ,QAAQ,EAAE,IAAI;gBACd,SAAS,EAAE,IAAI;gBACf,QAAQ,EAAE,SAAS;gBACnB,WAAW,EAAE,EAAE;gBACf,WAAW,EAAE;oBACX,mBAAmB,EAAE,KAAK;oBAC1B,oBAAoB,EAAE,KAAK;oBAC3B,kBAAkB,EAAE,KAAK;iBAC1B;aACF,CAAC;SACH;KAEF;;;ICtJD,IAAY,UAIX;IAJD,WAAY,UAAU;QACpB,iCAAmB,CAAA;QACnB,iCAAmB,CAAA;QACnB,+BAAiB,CAAA;IACnB,CAAC,EAJW,UAAU,KAAV,UAAU,QAIrB;IAcD;;;AAGA,UAAa,IAAI;QAiBf,YAAY,MAAa,EAAE,KAAW,EAAE,WAAkB,EAAE,KAAY,EAAE,iBAAmC,EAAE,SAA8B,EAAE,cAAmB;YARlJ,WAAM,GAAe,EAAE,CAAC;YAChC,WAAM,GAAwB;gBACpC,IAAI,EAAE,UAAU,CAAC,OAAO;gBACxB,UAAU,EAAE,UAAU,CAAC,OAAO;gBAC9B,MAAM,EAAE,UAAU,CAAC,OAAO;aAC3B,CAAC;YAIA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;YAC3C,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,OAAuB,CAAC;YAC7C,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;YAC3B,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;YACrC,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,qBAAqB,EAAE;gBACpE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,qBAAqB,CAAC;aAChE;SACF;QAEM,aAAa;YAClB,OAAO,IAAI,CAAC,MAAM,CAAC;SACpB;QAEM,MAAM;;YACX,OAAO,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,MAAA,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,0CAAE,GAAa,CAAC,CAAC;SACrH;QAEM,MAAM;YACX,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EACjD,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,aAAa,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,cAAc,CAAC,eAAe;mBAChG,IAAI,CAAC,SAAS,KAAK,SAAS,GAAG,cAAc,CAAC,aAAa,GAAG,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACxG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC;SACvC;QAEM,IAAI,CAAC,IAAW;YACrB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SACpC;QAEM,IAAI;YACT,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;YACnD,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,UAAU,CAAC,MAAM,CAAC;SACtC;QAEM,MAAM;YACX,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;YACrD,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC;SACvC;QAEM,IAAI;YACT,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,UAAU,CAAC,MAAM,CAAC;;YAE3C,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;SACpC;QAEM,MAAM;YACX,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;YAC7B,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,UAAU,CAAC,OAAO,CAAC;YAC5C,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;;SAEtC;QAEM,SAAS,CAAC,IAAkB,EAAE,SAAS,GAAG,IAAI;YACnD,MAAM,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;YACrB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;gBACf,KAAK,EAAE,IAAI;gBACX,IAAI,EAAE,CAAC;gBACP,QAAQ,EAAE,CAAC,CAAC,OAAO,EAAE,GAAG,IAAI;aAC7B,CAAC,CAAC;YACH,IAAI,SAAS,EAAE;gBACb,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE;oBACnB,IAAI;oBACJ,WAAW,EAAE,IAAI;oBACjB,aAAa,EAAE,IAAI,CAAC,aAAa;oBACjC,MAAM,EAAE,IAAI,CAAC,MAAM;oBACnB,SAAS,EAAE,IAAI,CAAC,SAAS;oBACzB,SAAS,EAAE,IAAI,CAAC,MAAM;oBACtB,cAAc,EAAE,IAAI,CAAC,WAAW;iBACjC,CAAC,CAAC;aACJ;SACF;QAEO,gBAAgB,CAAC,OAAe;YACtC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,OAAO,CAAC,CAAC,EAAM;gBAClD,EAAE,CAAC,OAAO,GAAG,OAAO,CAAC;aACtB,CAAC,CAAC;SACJ;KAEF;;;UC5HY,wBAAwB;;;;QAK5B,OAAO,QAAQ,CAAC,KAAW,EAAE,MAAa,EAAE,KAAY,EAAE,WAAkB;YACjF,MAAM,iBAAiB,GAAG,IAAI,iBAAiB,EAAE,CAAC;YAElD,iBAAiB,CAAC,OAAO,GAAG,CAAC,EAAM;gBACjC,MAAM,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC;gBACvB,IAAI,KAAK,CAAC,IAAI,KAAK,OAAO,EAAE;oBAC1B,OAAO;iBACR;gBACD,MAAM,MAAM,GAAG,IAAI,WAAW,EAAE,CAAC;gBACjC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;gBACvB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;oBAClB,OAAO;iBACR;gBACD,KAAK,CAAC,OAAO,CAAC,YAAY,GAAG,MAAM,CAAC;gBACpC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,MAAM,CAAC;aACvC,CAAC;YAEF,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;gBAClB,OAAO,iBAAiB,CAAC;aAC1B;;YAGD,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,KAAS;gBACjD,iBAAiB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;aACnC,CAAC,CAAC;;YAGH,iBAAiB,CAAC,cAAc,GAAG,CAAC,SAAa;;gBAC/C,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE;oBACxB,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAC/B,KAAK,CAAC,MAAM,EACZ,MAAM,EACN,KAAK,EACL,WAAW,EACX,MAAA,iBAAiB,CAAC,gBAAgB,0CAAE,GAAa,CAAC,CACnD,CAAC;iBACH;aACF,CAAC;YAEF,iBAAiB,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,CAAC,KAAS;gBAC7C,iBAAiB,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAQ,CAAC,CAAC;aAC7D,CAAC,CAAC;YACH,OAAO,iBAAiB,CAAC;SAC1B;;;;QAKM,OAAO,OAAO,CAAC,KAAW,EAAE,YAAgB;YACjD,OAAO,IAAI,OAAO,CAAoB,CAAC,KAAK,EAAE,KAAK;gBAEjD,MAAM,iBAAiB,GAAG,IAAI,iBAAiB,EAAE,CAAC;gBAClD,iBAAiB,CAAC,OAAO,GAAG,CAAC,EAAM;oBACjC,MAAM,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC;oBACvB,IAAI,KAAK,CAAC,IAAI,KAAK,OAAO,EAAE;wBAC1B,OAAO;qBACR;oBACD,MAAM,MAAM,GAAG,IAAI,WAAW,EAAE,CAAC;oBAEjC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;oBACvB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;wBAClB,OAAO;qBACR;oBACD,KAAK,CAAC,OAAO,CAAC,YAAY,GAAG,MAAM,CAAC;oBACpC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,MAAM,CAAC;iBACvC,CAAC;gBAGF,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;oBAClB,KAAK,CAAC,iBAAiB,CAAC,CAAC;oBACzB,OAAO;iBACR;;gBAGD,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,KAAS;oBACjD,iBAAiB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACnC,CAAC,CAAC;gBAEH,iBAAiB,CAAC,oBAAoB,CAAC,IAAI,qBAAqB,CAAC,EAAC,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,YAAY,CAAC,GAAG,EAAC,CAAC,CAAC;qBACtG,IAAI,CAAC;oBACJ,iBAAiB,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,CAAC;wBACrC,iBAAiB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;qBAC1C,CAAC,CAAC;iBACJ,CAAC,CAAC;gBAEL,KAAK,CAAC,iBAAiB,CAAC,CAAC;aAC1B,CAAC,CAAC;SACJ;QAEM,OAAO,UAAU,CAAC,KAAW,EAAE,MAAU;YAC9C,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;SACpC;KAEF;;;IC/FD;;;;;;AAMA,UAAa,iBAAiB;QAK5B,YAAY,KAAW,EAAE,KAAa;YACpC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACpB;;;;;;QAOM,OAAO,CAAC,OAAW,EAAE,IAAmB;YAC7C,OAAO,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;SACpG;QAEO,aAAa,CAAC,OAAyB,EAAE,IAAmB;YAClE,IAAI,IAAI,CAAC,KAAK,EAAE;gBACd,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;aAC3C;YACD,QAAQ,OAAO,CAAC,MAAM;gBACpB,KAAK,WAAW,CAAC,WAAW;oBAC1B,OAAO,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;gBACrC,KAAK,WAAW,CAAC,MAAM;oBACrB,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;gBAChC,KAAK,WAAW,CAAC,KAAK;oBACpB,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,GAAG,SAAS;0BAC/C,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,IAAY,CAAC,CAAC;gBAC1C,KAAK,WAAW,CAAC,MAAM;oBACrB,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,aAAa,CAAC,MAAM,CAAC,CAAC;oBAC3C,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;gBAChC,KAAK,WAAW,CAAC,MAAM;oBACrB,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,aAAa,CAAC,SAAS,CAAC,CAAC;oBAC9C,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,GAAG,SAAS;0BAC/C,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,IAAY,CAAC,CAAC;gBAC3C,KAAK,WAAW,CAAC,OAAO;oBACtB,IAAI,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE;wBAClC,IAAa,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;qBAChD;oBACD,MAAM;gBACR,KAAK,WAAW,CAAC,GAAG;oBAClB,IAAI,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE;wBAClC,IAAa,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;qBAChD;aACJ;YACD,OAAO,SAAS,CAAC;SAClB;QAEO,kBAAkB,CAAC,OAA8B,EAAE,IAAmB;YAC5E,IAAI,IAAI,CAAC,KAAK,EAAE;gBACd,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,OAAO,CAAC,CAAC;aAChD;YACD,IAAI,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE;gBAC5C,QAAQ,OAAO,CAAC,MAAM,CAAC,OAAO;oBAC5B,KAAK,wBAAwB,CAAC,WAAW;wBACvC,IAAI,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE;4BAClC,IAAa,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;yBAC/C;wBACD,MAAM;oBACR,KAAK,wBAAwB,CAAC,SAAS;wBACrC,IAAI,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE;4BAClC,IAAa,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;yBAChD;iBACJ;aACF;YACD,IAAI,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE;gBAC3C,QAAQ,OAAO,CAAC,MAAM,CAAC,MAAM;oBAC3B,KAAK,UAAU,CAAC,IAAI;wBAClB,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,GAAG,SAAS;8BAC/C,IAAI,CAAC,MAAM,CAAC,IAAY,CAAC,CAAC;oBAChC,KAAK,UAAU,CAAC,MAAM;wBACpB,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,GAAG,SAAS;8BAC/C,IAAI,CAAC,QAAQ,CAAC,IAAY,CAAC,CAAC;iBACnC;aACF;YACD,OAAO,SAAS,CAAC;SAClB;QAEO,aAAa,CAAC,OAAyB;YAC7C,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,EAAsB,CAAC,CAAC;SACjE;;;;;;;;QAUO,OAAO,CAAC,OAAyB,EAAE,IAAS;YAClD,IAAI,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,IAAI,qBAAqB,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,GAAG,EAAC,CAAC,CAAC;iBAC9G,IAAI,CAAC;gBACJ,IAAI,IAAI,CAAC,KAAK,EAAE;oBACd,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;iBACvC;gBACD,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aACtC,CAAC,CAAC,KAAK,CAAC;gBACP,IAAI,IAAI,CAAC,KAAK,EAAE;oBACd,OAAO,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;iBAC7C;aACF,CAAC,CAAC;SACN;QAEO,QAAQ,CAAC,OAAyB;YACxC,wBAAwB;iBACrB,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,MAAM,CAAC;iBACnC,IAAI,CAAC,EAAE;gBACN,MAAM,IAAI,GAAG,IAAI,IAAI,CACnB,OAAO,CAAC,MAAM,CAAC,MAAM,EACrB,IAAI,CAAC,KAAK,EACV,OAAO,CAAC,MAAM,CAAC,8BAA8B,EAC7C,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EACrB,EAAE,EACF,SAAS,EACT,OAAO,CAAC,MAAM,CACf,CAAC;gBACF,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC5B,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;aACvC,CAAC,CAAC;SACN;;QAGO,QAAQ,CAAC,OAAyB;YACxC,wBAAwB,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,MAAM,CAAC;iBAC5D,IAAI,CAAC,EAAE;gBACN,MAAM,IAAI,GAAG,IAAI,IAAI,CACnB,OAAO,CAAC,MAAM,CAAC,MAAM,EACrB,IAAI,CAAC,KAAK,EACV,OAAO,CAAC,MAAM,CAAC,8BAA8B,EAC7C,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EACrB,EAAE,EACF,OAAO,CAAC,MAAM,CAAC,iBAAiB,EAChC,OAAO,CAAC,MAAM,CACf,CAAC;gBACF,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC5B,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;gBACzC,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aACtC,CAAC,CAAC;SACN;;;;QAKO,QAAQ,CAAC,OAAyB,EAAE,IAAS;YACnD,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;SACzC;;;;QAMO,MAAM,CAAC,IAAS;YACtB,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;SACpC;QAEO,QAAQ,CAAC,IAAS;YACxB,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;SACtC;;;;;;;;QAUO,oBAAoB,CAAC,IAAmB;YAC9C,IAAI,CAAC,IAAI,EAAE;gBACT,SAAS,CAAC,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,oCAAoC,CAAC,CAAC;gBACjF,OAAO,KAAK,CAAC;aACd;YACD,OAAO,IAAI,CAAC;SACb;QAEO,SAAS,CAAC,IAAmB,EAAE,KAAmB;YACxD,IAAI,IAAI,EAAE;gBACR,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;aACvB;SACF;KAEF;;;UCjMY,UAAU;QAMrB,YAAY,KAAW,EAAE,KAAa;YACpC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,GAAG,cAAc,GAAG,QAAQ,CAAC;SACzD;;;;;;QAOM,kBAAkB;YACvB,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;gBACxC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aAC9B,EAAE,KAAK,CAAC,CAAC;YACV,IAAI,IAAI,CAAC,KAAK,EAAE,CAQf;SACF;QAEM,WAAW,CAAC,IAAS;YAC1B,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;gBACvE,IAAI,CAAC,MAAM,EAAE,CAAC;aACf;YACD,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;;gBAEvB,IAAI,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,UAAU,EAAE;oBACjD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;iBAC5B;qBAAM;oBACL,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE;wBAC9B,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;wBAC/C,MAAM,CAAC,OAAO,CAAC,CAAC,EAAM,KAAK,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;qBACvC;iBACF;aACF;;YAED,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,IAAI,UAAU,EAAE;gBACxE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;aAClC;SACF;QAEO,KAAK,CAAC,KAAY;YACxB,IAAI,IAAI,CAAC,KAAK,EAAE;gBACd,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;aAChC;YACD,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;SACnE;KAEF;;;UC9DY,YAAY;;;;;QAQhB,OAAO,GAAG;YACf,MAAM,CAAC,GAAG,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACzD,IAAI,CAAC,EAAE;gBACL,OAAO,CAAC,CAAC;aACV;YACD,MAAM,KAAK,GAAG,WAAW,CAAC,OAAO,EAAE,CAAC;YACpC,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YACtD,OAAO,KAAK,CAAC;SACd;;IAduB,uBAAU,GAAG,wBAAwB,CAAC;;;ICOhE;;;;;;;;;;;;AAYA,UAAa,KAAK;QAkDhB,YAAY,KAAY,EAAE,KAAa,EAAE,IAAc;;;;YAf/C,cAAS,GAAc,EAAE,CAAC;YAQjB,oBAAe,GAAG,8BAA8B,CAAC;YAQhE,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,IAAI,CAAC,YAAY,GAAG,IAAI,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YAC5D,IAAI,CAAC,OAAO,GAAG,IAAI,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YAChD,IAAI,CAAC,MAAM,GAAG,IAAI,WAAW,EAAE,CAAC;YAChC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACpB;;;;QAMM,WAAW,CAAC,IAAa;YAC9B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC3B;QAEM,YAAY,CAAC,KAAe;YACjC,OAAO,IAAI,OAAO,CAAY,CAAC,KAAK,EAAE,KAAK;;;gBAGzC,OAAO,CAAC,GAAG,CAAC;oBACV,YAAY,CAAC,qBAAqB,CAAC,EAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC;oBAC/D,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC;iBACrC,CAAC,CAAC,IAAI,CAAC,GAAG;oBACT,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;iBAC5B,CAAC,CAAC,KAAK,CAAC,GAAG;oBACV,KAAK,CAAC,GAAG,CAAC,CAAC;iBACZ,CAAC,CAAC;aACJ,CAAC,CAAC;SACJ;;;;QAKM,SAAS,CAAC,WAAkB;YACjC,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;;gBAEzC,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;aACxC;YACD,IAAI;gBACF,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;gBACrC,MAAM,EAAE,GAAG,wBAAwB,CAAC,QAAQ,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,WAAW,CAAC,CAAC;gBACzF,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE,UAAU,CAAC,CAAC;gBAClF,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;gBAC/C,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;gBAC3C,OAAO,IAAI,CAAC;aACb;YAAC,OAAO,CAAC,EAAE;gBACV,SAAS,CAAC,KAAK,CAAC,aAAa,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;gBACnD,OAAO,SAAS,CAAC;aAClB;SACF;;;;QAKM,UAAU,CAAC,MAAa,EAAE,WAAkB,EAAE,GAAU;YAC7D,IAAI;gBACF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,MAAgB,EAAE,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC;gBACpG,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,CAAC;gBACpD,IAAI,CAAC,EAAE;oBACL,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;iBACnC;aACF;YAAC,OAAO,CAAC,EAAE;gBACV,SAAS,CAAC,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;aAC/C;SACF;;;;QAKM,UAAU,CAAC,MAAa,EAAE,WAAkB,EAAE,SAAwB,cAAc,CAAC,eAAe;;YAEzG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;SAC1B;;;;QAKM,QAAQ,CAAC,MAAa,EAAE,WAAkB;YAC/C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAgB,EAAE,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,WAAW,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;SAC/G;;;;QAKM,UAAU,CAAC,MAAa,EAAE,WAAkB;YACjD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAgB,EAAE,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,WAAW,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;SACjH;;;;QAKM,SAAS,CAAC,MAAa,EAAE,WAAkB;YAChD,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,CAAC;YACvD,IAAI,IAAI,EAAE;gBACR,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;aACrC;YACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAgB,EAAE,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,WAAW,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;SAChH;;;;QAKM,WAAW,CAAC,MAAa;YAC9B,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,CAAC;YACjE,IAAI,SAAS,KAAK,CAAC,CAAC,EAAE;gBACpB,OAAO;aACR;YACD,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;YACvD,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;YAChD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SACjC;;;;QAKM,mBAAmB,CAAC,MAAa,EAAE,WAAkB,EAAE,cAAc,GAAG,IAAI;YACjF,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;YACpC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;SAC1B;;;;QAKM,IAAI,CAAC,MAAa,EAAE,IAAW;YACpC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAgB,EAAE,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC;SACnF;;;;QAKM,IAAI,CAAC,IAAQ;YAClB,IAAI,IAAI,CAAC,KAAK,EAAE;gBACd,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;aACvC;YACD,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBAChB,OAAO;aACR;YACD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;SACxC;;;;QAKO,KAAK,CAAC,aAA2B;YACvC,IAAI,CAAC,QAAQ,GAAG,aAAa,CAAC;YAC9B,OAAO,IAAI,OAAO,CAAO,CAAC,KAAK,EAAE,KAAK;gBACpC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;oBAChB,OAAO,KAAK,EAAE,CAAC;iBAChB;gBACD,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,GAAG,EAAE,CAAC;gBACjC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,aAAa,CAAC,IAAI,EAAE,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC;aACvF,CAAC,CAAC;SACJ;;;;;QAMO,UAAU,CAAC,SAAgB;YACjC,OAAO,IAAI,OAAO,CAAO,CAAC,KAAK,EAAE,KAAK;gBACpC,IAAI,CAAC,MAAM,GAAG,IAAI,SAAS,CAAC,SAAS,CAAC,CAAC;gBACvC,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG;oBACpB,IAAI,IAAI,CAAC,KAAK,EAAE;wBACd,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;qBAC9B;iBACF,CAAC;gBACF,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG;oBACnB,IAAI,IAAI,CAAC,KAAK,EAAE;wBACd,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;qBAC9B;;oBAED,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE,CAAC;oBAClC,KAAK,EAAE,CAAC;iBACT,CAAC;gBACF,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,GAAG;oBAC1B,IAAI;wBACF,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;wBAClC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;4BACxB,SAAS,CAAC,KAAK,CAAC,aAAa,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;4BACnD,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;yBAClD;wBACD,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM;6BAClE,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC;wBACvE,MAAM,WAAW,GAAG,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,GAAG,SAAS,CAAC;wBACnF,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;qBAC9C;oBAAC,OAAO,GAAG,EAAE;wBACZ,SAAS,CAAC,KAAK,CAAC,aAAa,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;wBAClD,IAAI,IAAI,CAAC,KAAK,EAAE;4BACd,OAAO,CAAC,IAAI,CAAC,0BAA0B,EAAE,GAAG,CAAC,CAAC;yBAC/C;qBACF;iBACF,CAAC;aACH,CAAC,CAAC;SACJ;QAEM,uBAAuB;YAC5B,MAAM,iBAAiB,GAAG,IAAI,iBAAiB,CAAC;gBAC9C,UAAU,EAAE,CAAC,EAAC,IAAI,EAAE,IAAI,CAAC,eAAe,EAAC,CAAC;aAC3C,CAAC,CAAC;YAEH,OAAO,iBAAiB,CAAC;SAC1B;;;;QAKM,QAAQ;;YACb,OAAO,GAAG,MAAA,IAAI,CAAC,QAAQ,0CAAE,IAAI,IAAI,MAAA,IAAI,CAAC,QAAQ,0CAAE,QAAQ,EAAE,CAAC;SAC5D;QAES,yBAAyB;YACjC,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;gBACzC,SAAS,CAAC,KAAK,CAAC,aAAa,CAAC,UAAU,EAAE,QAAQ,CAAC,WAAW,CAAC,CAAC;gBAChE,OAAO,KAAK,CAAC;aACd;YACD,OAAO,IAAI,CAAC;SACb;;;;QAKO,cAAc,CAAC,IAAQ;YAC7B,OAAO,OAAO,IAAI,KAAK,QAAQ;mBAC1B,SAAS,IAAI,IAAI;mBACjB,IAAI,CAAC,OAAO,KAAK,KAAK,CAAC;SAC7B;KAEF;;UCrQY,UAAU;QAUrB,YAAY,OAAyB;YANpB,UAAK,GAAU,EAAE,CAAC;YAOjC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,IAAI,KAAK,CAAC;YACpC,IAAI,CAAC,UAAU,GAAG,IAAI,UAAU,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;YAC5D,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;YAE7D,IAAI,OAAO,CAAC,WAAW,EAAE;gBACvB,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,CAAC;iBACpB,CAAC,CAAC,KAAK,CAAC,GAAG,MAAM,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC;aACjC;SACF;;;;;QAMM,OAAO;YACZ,OAAO,IAAI,OAAO,CAAM,CAAC,KAAK,EAAE,KAAK;gBACnC,qBAAqB,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;qBAC1E,IAAI,CAAC,GAAG;oBACP,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;oBAC1B,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;oBAC7C,KAAK,EAAE,CAAC;iBACT,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aAC/B,CAAC,CAAC;SACJ;QAEM,WAAW,CAAC,IAAa;YAC9B,OAAO,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;SAClC;QAEM,SAAS,CAAC,WAAkB;YACjC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;YAC/C,IAAI,CAAC,IAAI,EAAE;gBACT,OAAO,SAAS,CAAC;aAClB;YACD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACtB,OAAO,IAAI,CAAC;SACb;KAEF;;;;;;;;;;;;"}